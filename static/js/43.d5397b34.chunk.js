(this.webpackJsonpsduoj=this.webpackJsonpsduoj||[]).push([[43],{1023:function(e,t,n){"use strict";var a=n(27),r=n(66),c=n(991),i=n(313),o=n(981),s=n(64),l=n(1107),u=n(990),d=n(0),b=n(91),m=n(71),j=n(312),f=n(43),p=n(316),h=n(63),O=n(306),g=n(6);t.a=Object(m.b)((function(e){var t,n=e.UserReducer,r=e.TableReduce;return{roles:null===(t=n.userInfo)||void 0===t?void 0:t.roles,tableData:Object(a.a)({},r.tableData)}}),(function(e){return{setTableInfo:function(t,n){return e({type:"setTableInfo",name:t,data:n})},setDataSource:function(t,n){return e({type:"setDataSource",data:t,name:n,add:!1})}}}))(Object(j.a)()(Object(f.e)((function(e){var t,n,m=Object(d.useState)(0),j=Object(r.a)(m,2),f=j[0],v=j[1],x=Object(d.useState)(),y=Object(r.a)(x,2),w=y[0],S=y[1],C=Object(d.useState)(!0),I=Object(r.a)(C,2),N=I[0],F=I[1],k=Object(d.useState)(1),z=Object(r.a)(k,2),T=z[0],P=z[1],E=Object(d.useState)(Object(h.a)(e.defaultPageSize,b.h)),D=Object(r.a)(E,2),L=D[0],V=D[1],M=Object(d.useState)(),A=Object(r.a)(M,2),R=A[0],G=A[1],K=Object(d.useState)(0),B=Object(r.a)(K,2),J=B[0],U=B[1],q=function(t){S(t),void 0!==e.setDataSource&&void 0!==e.name&&e.setDataSource(t,e.name)},H=function(t,n,r,c){var i,o,s,l,u,d,b,m,j,f=null===(i=e.tableData[e.name])||void 0===i?void 0:i.tableInfo;void 0!==f&&(void 0===c&&void 0!==f.moreProps&&Q.setFieldsValue(f.moreProps),t=null!==(d=t)&&void 0!==d?d:f.pageNow,n=null!==(b=n)&&void 0!==b?b:f.pageSize,r=null!==(m=r)&&void 0!==m?m:f.searchKey,c=null!==(j=c)&&void 0!==j?j:f.moreProps);var p=null!==(o=t)&&void 0!==o?o:T,h=null!==(s=n)&&void 0!==s?s:L,O=null!==(l=r)&&void 0!==l?l:R,g=null!==(u=c)&&void 0!==u?u:Q.getFieldsValue();P(p),V(h),G(O),F(!0),e.API(Object(a.a)({pageNow:p,pageSize:h,searchKey:O},g)).then((function(t){null===t.rows&&(t.rows=[]),void 0!==e.APIRowsTransForm?q(e.APIRowsTransForm(t.rows)):q(t.rows),void 0!==t.totalNum&&"0"!==t.totalNum?(v(t.totalNum),e.name&&e.setTableInfo(e.name,{total:t.totalNum,pageNow:p,pageSize:h,searchKey:O,moreProps:g})):(v(h*t.totalPage),e.name&&e.setTableInfo(e.name,{total:h*t.totalPage,pageNow:p,pageSize:h,searchKey:O,moreProps:g})),F(!1)}))};Object(d.useEffect)((function(){Q.setFieldsValue(e.initRequestProps),H()}),[e.name]);var W=Object(O.a)(),Q=Object(r.a)(W,1)[0],Z=function(){var e=Q.getFieldsValue();"{}"!==JSON.stringify(e)&&H(1,L,void 0,e)},$=function(){var t,n=Q.getFieldsValue();Q.resetFields();var a=null===(t=e.tableData[e.name])||void 0===t?void 0:t.tableInfo;e.name&&e.setTableInfo(e.name,{total:a.total,pageNow:a.pageNow,pageSize:a.pageSize,searchKey:a.searchKey,moreProps:void 0});var r=Q.getFieldsValue();JSON.stringify(n)!==JSON.stringify(r)&&H(1,L,void 0,void 0)};return Object(d.useEffect)((function(){var t,n=null===(t=e.tableData[e.name])||void 0===t?void 0:t.tableVersion;if(void 0!==n&&J!==n)if(n<0){var a;U(-n),S(null===(a=e.tableData[e.name])||void 0===a?void 0:a.dataSource)}else{U(n);var r=Q.getFieldsValue();H(T,L,R,r)}}),[e.tableData,J]),Object(g.jsxs)(g.Fragment,{children:[e.useList&&Object(g.jsx)(c.a,{title:e.title,bordered:!0,size:"default",className:null!==(t=e.cardProps)&&void 0!==t?t:"zeroBodyPaddingLeft",extra:(!0===e.search||void 0!==e.getForm)&&Object(g.jsxs)(g.Fragment,{children:[!0===e.search&&Object(g.jsx)(p.a,{placeholder:e.t("searchUser"),onSearch:function(e){G(e),P(1);var t=Q.getFieldsValue();H(1,L,e,t)},enterButton:!0,style:{width:300}},"search"),void 0!==e.getForm&&Object(g.jsxs)(i.a,{form:Q,children:[e.getForm(Z),e.useFormBtn&&Object(g.jsxs)(o.b,{style:{marginLeft:"30px"},size:20,children:[Object(g.jsx)(s.a,{type:"primary",onClick:Z,children:"\u7b5b\u9009"}),Object(g.jsx)(s.a,{htmlType:"button",onClick:$,children:"\u91cd\u7f6e"})]})]})]}),children:Object(g.jsx)(l.b,{grid:e.grid,itemLayout:"vertical",loading:N,size:e.size,dataSource:w,renderItem:e.renderItem,pagination:{onChange:function(e,t){H(e,t)},current:T,pageSize:L,total:f,size:"small",hideOnSinglePage:!0,showQuickJumper:!0,showLessItems:!0,showSizeChanger:Object(h.a)(e.showSizeChanger,!0),pageSizeOptions:["5","15","20","50","80"]}})}),!e.useList&&Object(g.jsx)(c.a,{bordered:!1,size:"small",extra:(!0===e.search||void 0!==e.getForm)&&Object(g.jsxs)(g.Fragment,{children:[!0===e.search&&Object(g.jsx)(p.a,{placeholder:"\u641c\u7d22",onSearch:function(e){G(e),P(1),H(1,L,e)},enterButton:!0,style:{width:300}},"search"),void 0!==e.getForm&&Object(g.jsxs)(i.a,{form:Q,children:[e.getForm(Z),Object(g.jsxs)(o.b,{style:{marginLeft:"30px"},size:20,children:[Object(g.jsx)(s.a,{type:"primary",onClick:Z,children:e.t("filtering")}),Object(g.jsx)(s.a,{htmlType:"button",onClick:$,children:e.t("Reset")})]})]})]}),children:Object(g.jsx)(u.a,{rowKey:e.rowKey,loading:N,size:e.size,columns:e.columns,rowSelection:e.rowSelection,dataSource:w,pagination:null!==(n=e.pagination)&&void 0!==n?n:{onChange:function(e,t){H(e,t)},current:T,pageSize:L,total:f,hideOnSinglePage:!1,showQuickJumper:!0,showLessItems:!0,showSizeChanger:Object(h.a)(e.showSizeChanger,!0),pageSizeOptions:["5","15","20","50","80"]}})})]})}))))},1034:function(e,t,n){"use strict";var a=n(9),r=n(27),c=n(66),i=n(4),o=n.n(i),s=n(0),l=n(71),u=n(312),d=n(43),b=n(101),m=n(64),j=n(984),f=n(313),p=n(426),h=n(428),O=n(63),g=n(306),v=n(1446),x=n(6);t.a=Object(l.b)((function(){return{}}),(function(e){return{addTableVersion:function(t){return e({type:"addTableVersion",name:t})},addManageInitData:function(t,n){return e({type:"addManageInitData",key:t,data:n})}}}))(Object(u.a)()(Object(d.e)((function(e){var t,n=Object(g.a)(),i=Object(c.a)(n,1)[0],l=Object(s.useRef)([]),u=Object(s.useState)(!1),d=Object(c.a)(u,2),y=d[0],w=d[1],S=Object(s.useState)(),C=Object(c.a)(S,2),I=C[0],N=C[1],F=Object(s.useState)(0),k=Object(c.a)(F,2),z=k[0],T=k[1],P=Object(s.useState)(!1),E=Object(c.a)(P,2),D=E[0],L=E[1];Object(s.useEffect)((function(){setTimeout((function(){!Object(O.c)(l.current)&&l.current.forEach((function(e){var t;null===(t=e.current)||void 0===t||t.setFieldsValue(I)})),i&&i.setFieldsValue(I)}),100),y||(T(0),l.current.forEach((function(e){var t;null===(t=e.current)||void 0===t||t.resetFields()})),e.formName&&e.addManageInitData(e.formName,void 0))}),[y,I]),Object(s.useEffect)((function(){e.formName&&e.addManageInitData(e.formName,I)}),[I]);var V=function(t){var n=function(t){L(!0),e.updateAppendProps&&Object.assign(t,e.updateAppendProps),e.dataSubmitter(t).then((function(t){e.TableName&&e.addTableVersion(e.TableName),e.afterSubmit&&e.afterSubmit(t),e.onClose&&e.onClose(),w(!1),b.b.success("\u6210\u529f")})).finally((function(){L(!1)}))};1===e.subForm.length?i.validateFields().then((function(e){n(e)})).catch((function(){b.b.error("\u8868\u5355\u4e0d\u5b8c\u6574")})):n(t)};return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(m.a,Object(r.a)(Object(r.a)({},e.btnProps),{},{type:Object(O.a)(e.btnType,{create:"primary",update:"link",fork:"link",batchUpdate:"primary"}[e.type]),onClick:function(){if("update"===e.type||"fork"===e.type)if(void 0===e.initData){var t=b.b.loading({content:"\u52a0\u8f7d\u4e2d",duration:0});if(void 0===e.dataLoader)return t(),void b.b.error("\u672a\u5b9a\u4e49\u6570\u636e\u52a0\u8f7d\u5668");e.dataLoader&&e.dataLoader().then((function(e){N(e),t(),w(!0)})).catch((function(){t()}))}else N(e.initData),w(!0);else"create"===e.type?(void 0!==e.initData&&N(e.initData),w(!0)):w(!0)},style:"fork"===e.type||"update"===e.type||"link"===e.btnType?{paddingLeft:5,paddingRight:5}:void 0,children:[function(){if(!1!==e.btnIcon){if("create"===e.type)return Object(x.jsx)(p.a,{});if("batchUpdate"===e.type)return Object(x.jsx)(h.a,{})}}(),function(){if(void 0!==e.btnName)return e.btnName;switch(e.type){case"create":return e.t("create");case"update":return e.t("Edit");case"fork":return"\u514b\u9686";default:return"\u6279\u91cf\u4fee\u6539"}}()]})),1===e.subForm.length&&Object(x.jsx)(j.a,{width:e.width,style:{minWidth:e.width},destroyOnClose:!0,title:e.title,className:e.className,visible:y,maskClosable:!1,onCancel:function(){e.onClose&&e.onClose(),w(!1)},footer:[Object(x.jsx)(m.a,{type:"primary",onClick:V,loading:D,children:e.t("Submit")},"submit")],children:Object(x.jsx)(f.a,{form:i,layout:null!==(t=e.layout)&&void 0!==t?t:"vertical",initialValues:e.initData,scrollToFirstError:!0,preserve:!1,children:e.subForm[0].component})}),1!==e.subForm.length&&Object(x.jsx)(v.b,{current:z,onCurrentChange:function(e){T(e)},formMapRef:l,onFinish:function(){var e=Object(a.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),submitter:{submitButtonProps:{loading:D}},stepsFormRender:function(t,n){var a;return Object(x.jsx)(j.a,{destroyOnClose:!0,title:e.title,className:e.className,visible:y,maskClosable:!1,width:null!==(a=e.width)&&void 0!==a?a:1200,style:{minWidth:e.width},onCancel:function(){e.onClose&&e.onClose(),w(!1)},footer:n,children:t})},children:e.subForm.map((function(t,n){var r;return Object(x.jsx)(v.b.StepForm,{layout:null!==(r=e.layout)&&void 0!==r?r:"vertical",name:"step"+n,title:t.label,onFinish:Object(a.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),children:t.component})}))})]})}))))},1037:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var a=n(105),r=n(1055),c=n.n(r),i=function(e,t){var n=new FormData,r=0,i=[],o=[];e.forEach((function(e){o.push(e.arrayBuffer().then((function(o){var s=c()(o);return i.push(a.a.getFileByMD5({md5:s}).then((function(a){return null!==a?(t(a),Promise.resolve()):(n.append("files",e),r+=1,Promise.resolve())}))),Promise.resolve()})))})),Promise.all(o).then((function(){Promise.all(i).then((function(){0!==r&&a.a.uploadFile(n).then((function(e){e.map((function(e){t(e)}))}))}))}))},o=function(e,t){var n=new FormData;n.append("file",e),a.a.uploadSingleFile(n).then((function(e){t(e)}))}},1067:function(e,t,n){"use strict";var a=n(66),r=n(0),c=n(1041),i=n.n(c),o=n(1037),s=n(101),l=n(64),u=n(425),d=n(981),b=n(1081),m=n.n(b),j=n(71),f=n(418),p=n(312),h=n(43),O=n(151),g=n(63),v=n(6),x=function(e){var t=Date.now().toString(),n=Object(f.a)().t;return new m.a("."+e.btnText+t,{text:function(t){return e.text}}).on("success",(function(e){s.b.success(n("ReplicationSuccess"))})),Object(v.jsx)(l.a,{className:e.btnText+t,size:"small",children:e.btnText})},y="https://oj.qd.sdu.edu.cn";t.a=Object(j.b)((function(e){return{langCode:e.ConfigReducer.langCode}}),(function(e){return{}}))(Object(p.a)()(Object(h.e)((function(e){var t,n=Object(r.useState)(void 0),c=Object(a.a)(n,2),l=c[0],b=c[1],m=Object(r.useState)(!1),j=Object(a.a)(m,2),f=j[0],p=j[1];return Object(r.useEffect)((function(){Object(g.c)(e.langCode)||function(){var t,n=new i.a(null!==(t=e.id)&&void 0!==t?t:"vditor",{height:void 0===e.height?800:e.height,mode:"ir",placeholder:"\u652f\u6301 Markdown\uff0c\u652f\u6301 KaTex \u516c\u5f0f\n\u8868\u683c\u63d2\u5165\u4e00\u884c\uff1aCtrl+'+' \n\u8868\u683c\u63d2\u5165\u4e00\u5217\uff1aCtrl+Shift+'+'",lang:e.langCode,cdn:y+"/vditor",outline:{enable:!1,position:"left"},hint:{emojiPath:y+"/vditor/dist/images/emoji"},preview:{delay:500,hljs:{lineNumber:!1},markdown:{toc:!0,mark:!0,footnotes:!0,autoSpace:!0},math:{inlineDigit:!0,engine:"KaTeX"}},toolbar:["emoji","headings","bold","italic","strike","link","|","list","ordered-list","check","outdent","indent","|","quote","line","code","inline-code","insert-before","insert-after","|","upload","table","|","undo","redo","|","outline","fullscreen","edit-mode",{name:"more",toolbar:["code-theme","content-theme","export","help"]},"|",{hotkey:"\u2318-S",name:"save",tipPosition:"s",tip:"\u4fdd\u5b58",className:"right",icon:'<img style="height: 16px" src=\'https://img.58cdn.com.cn/escstatic/docs/imgUpload/idocs/save.svg\' alt="save"/>',click:function(){e.onChange&&e.onChange(n.getValue())}}],after:function(){n.setValue(void 0===e.value?"":e.value),p(!0)},blur:function(){e.onChange&&e.onChange(n.getValue())},upload:{accept:"*/*",multiple:!1,filename:function(e){return e.replaceAll(/[^(a-zA-Z0-9\u4e00-\u9fa5.)]/g,"").replaceAll(/[?\\/:|<>*\[\]()$%{}@~]/g,"").replaceAll("/\\s/g","")},handler:function(e){if(e[0].name.length>64)return s.b.error("\u6587\u4ef6\u540d\u5927\u4e8e 64 \u5b57\u7b26"),Promise.reject("\u6587\u4ef6\u540d\u5927\u4e8e 64 \u5b57\u7b26");Object(o.a)(e,(function(t){var a=e[0]&&e[0].name;a=a.replaceAll(/[^(a-zA-Z0-9\u4e00-\u9fa5.)]/g,"").replaceAll(/[?\\/:|<>*\[\]()$%{}@~]/g,"").replaceAll("/\\s/g","");var r=Object(O.a)().CLIENT_SERVER+"/api/filesys/download/"+t.id+"/"+a,c=a.substr(a.lastIndexOf(".")+1).toUpperCase(),i="";-1!==["BMP","DIB","PCP","DIF","WMF","GIF","JPG","TIF","EPS","PSD","CDR","IFF","TGA","PCD","MPT","PNG"].indexOf(c)?n&&"wysiwyg"===n.vditor.currentMode?i+='\n <img src="'.concat(r,'" alt="').concat(a,'" style="zoom:100%;" />'):i+="\n ![".concat(a,"](").concat(r,")"):n&&"wysiwyg"===n.vditor.currentMode?i+='\n <a href="'.concat(r,'">').concat(a,"</a>"):i+="\n [".concat(a,"](").concat(r,")"),document.execCommand("insertHTML",!1,i),u.a.open({message:"\u6587\u4ef6\u4e0a\u4f20\u6210\u529f",description:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("span",{children:["\u6587\u4ef6\u540d\uff1a",a]}),Object(v.jsx)("br",{}),Object(v.jsxs)(d.b,{children:["\u70b9\u51fb\u590d\u5236\uff1a",Object(v.jsx)(x,{text:r,btnText:"\u7eaf\u8def\u5f84"}),Object(v.jsx)(x,{text:"[".concat(a,"](").concat(r,")"),btnText:"MD\u94fe\u63a5"}),Object(v.jsx)(x,{text:"![".concat(a,"](").concat(r,")"),btnText:"MD\u56fe\u7247"})]}),Object(v.jsx)("br",{}),Object(v.jsxs)(d.b,{children:[Object(v.jsx)(x,{text:'<a href="'.concat(r,'">').concat(a,"</a>"),btnText:"HTML\u94fe\u63a5"}),Object(v.jsx)(x,{text:'<img src="'.concat(r,'" alt="').concat(a,'" style="zoom:100%;" />'),btnText:"HTML\u56fe\u7247"})]})]}),duration:null,type:"success"})}))}}});b(n)}()}),[e.langCode]),Object(r.useEffect)((function(){var t;f&&void 0!==l&&l.getValue()!==e.value&&l.setValue(null!==(t=e.value)&&void 0!==t?t:"")}),[l,e.value,f]),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{id:null!==(t=e.id)&&void 0!==t?t:"vditor",className:"vditor"})})}))))},1068:function(e,t,n){"use strict";var a=n(313),r=n(190),c=(n(0),n(312)),i=n(6);t.a=Object(c.a)()((function(e){var t,n;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(a.a.Item,{label:null!==(t=e.label)&&void 0!==t?t:e.t("title"),name:null!==(n=e.name)&&void 0!==n?n:"title",required:!0,children:Object(i.jsx)(r.a,{})})})}))},1106:function(e,t,n){"use strict";var a=n(1067),r=n(313),c=n(6);t.a=function(e){return Object(c.jsx)(r.a.Item,{label:e.label,name:e.name,children:Object(c.jsx)(a.a,{height:500,id:e.id})})}},1107:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var a=n(18),r=n(3),c=n(5),i=n(12),o=n(17),s=n(2),l=n.n(s),u=n(0),d=n.n(u),b=n(39),m=n(196),j=n(978),f=n(148),p=n(321),h=n(254),O=n(117),g=n(189),v=n(25),x=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},y=function(e,t){var n=e.prefixCls,a=e.children,i=e.actions,o=e.extra,s=e.className,m=e.colStyle,j=x(e,["prefixCls","children","actions","extra","className","colStyle"]),f=Object(u.useContext)(I),p=f.grid,h=f.itemLayout,O=Object(u.useContext)(b.b).getPrefixCls,y=O("list",n),w=i&&i.length>0&&d.a.createElement("ul",{className:"".concat(y,"-item-action"),key:"actions"},i.map((function(e,t){return d.a.createElement("li",{key:"".concat(y,"-item-action-").concat(t)},e,t!==i.length-1&&d.a.createElement("em",{className:"".concat(y,"-item-action-split")}))}))),S=p?"div":"li",C=d.a.createElement(S,Object(r.a)({},j,p?{}:{ref:t},{className:l()("".concat(y,"-item"),Object(c.a)({},"".concat(y,"-item-no-flex"),!("vertical"===h?o:!function(){var e;return u.Children.forEach(a,(function(t){"string"===typeof t&&(e=!0)})),e&&u.Children.count(a)>1}())),s)}),"vertical"===h&&o?[d.a.createElement("div",{className:"".concat(y,"-item-main"),key:"content"},a,w),d.a.createElement("div",{className:"".concat(y,"-item-extra"),key:"extra"},o)]:[a,w,Object(v.a)(o,{key:"extra"})]);return p?d.a.createElement(g.a,{ref:t,flex:1,style:m},C):C},w=Object(u.forwardRef)(y);w.Meta=function(e){var t=e.prefixCls,n=e.className,a=e.avatar,c=e.title,i=e.description,o=x(e,["prefixCls","className","avatar","title","description"]),s=(0,Object(u.useContext)(b.b).getPrefixCls)("list",t),m=l()("".concat(s,"-item-meta"),n),j=d.a.createElement("div",{className:"".concat(s,"-item-meta-content")},c&&d.a.createElement("h4",{className:"".concat(s,"-item-meta-title")},c),i&&d.a.createElement("div",{className:"".concat(s,"-item-meta-description")},i));return d.a.createElement("div",Object(r.a)({},o,{className:m}),a&&d.a.createElement("div",{className:"".concat(s,"-item-meta-avatar")},a),(c||i)&&j)};var S=w,C=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},I=u.createContext({});I.Consumer;function N(e){var t,n=e.pagination,s=void 0!==n&&n,d=e.prefixCls,g=e.bordered,v=void 0!==g&&g,x=e.split,y=void 0===x||x,w=e.className,S=e.children,N=e.itemLayout,F=e.loadMore,k=e.grid,z=e.dataSource,T=void 0===z?[]:z,P=e.size,E=e.header,D=e.footer,L=e.loading,V=void 0!==L&&L,M=e.rowKey,A=e.renderItem,R=e.locale,G=C(e,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),K=s&&"object"===Object(o.a)(s)?s:{},B=u.useState(K.defaultCurrent||1),J=Object(i.a)(B,2),U=J[0],q=J[1],H=u.useState(K.defaultPageSize||10),W=Object(i.a)(H,2),Q=W[0],Z=W[1],$=u.useContext(b.b),X=$.getPrefixCls,_=$.renderEmpty,Y=$.direction,ee={},te=function(e){return function(t,n){q(t),Z(n),s&&s[e]&&s[e](t,n)}},ne=te("onChange"),ae=te("onShowSizeChange"),re=X("list",d),ce=V;"boolean"===typeof ce&&(ce={spinning:ce});var ie=ce&&ce.spinning,oe="";switch(P){case"large":oe="lg";break;case"small":oe="sm"}var se=l()(re,(t={},Object(c.a)(t,"".concat(re,"-vertical"),"vertical"===N),Object(c.a)(t,"".concat(re,"-").concat(oe),oe),Object(c.a)(t,"".concat(re,"-split"),y),Object(c.a)(t,"".concat(re,"-bordered"),v),Object(c.a)(t,"".concat(re,"-loading"),ie),Object(c.a)(t,"".concat(re,"-grid"),!!k),Object(c.a)(t,"".concat(re,"-something-after-last-item"),!!(F||s||D)),Object(c.a)(t,"".concat(re,"-rtl"),"rtl"===Y),t),w),le=Object(r.a)(Object(r.a)(Object(r.a)({},{current:1,total:0}),{total:T.length,current:U,pageSize:Q}),s||{}),ue=Math.ceil(le.total/le.pageSize);le.current>ue&&(le.current=ue);var de=s?u.createElement("div",{className:"".concat(re,"-pagination")},u.createElement(p.a,Object(r.a)({},le,{onChange:ne,onShowSizeChange:ae}))):null,be=Object(a.a)(T);s&&T.length>(le.current-1)*le.pageSize&&(be=Object(a.a)(T).splice((le.current-1)*le.pageSize,le.pageSize));var me=Object.keys(k||{}).some((function(e){return["xs","sm","md","lg","xl","xxl"].includes(e)})),je=Object(f.a)(me),fe=u.useMemo((function(){for(var e=0;e<O.b.length;e+=1){var t=O.b[e];if(je[t])return t}}),[je]),pe=u.useMemo((function(){if(k){var e=fe&&k[fe]?k[fe]:k.column;return e?{width:"".concat(100/e,"%"),maxWidth:"".concat(100/e,"%")}:void 0}}),[null===k||void 0===k?void 0:k.column,fe]),he=ie&&u.createElement("div",{style:{minHeight:53}});if(be.length>0){var Oe=be.map((function(e,t){return function(e,t){return A?((n="function"===typeof M?M(e):M?e[M]:e.key)||(n="list-item-".concat(t)),ee[t]=n,A(e,t)):null;var n}(e,t)})),ge=u.Children.map(Oe,(function(e,t){return u.createElement("div",{key:ee[t],style:pe},e)}));he=k?u.createElement(j.a,{gutter:k.gutter},ge):u.createElement("ul",{className:"".concat(re,"-items")},Oe)}else S||ie||(he=function(e,t){return u.createElement("div",{className:"".concat(e,"-empty-text")},R&&R.emptyText||t("List"))}(re,_||m.a));var ve=le.position||"bottom",xe=u.useMemo((function(){return{grid:k,itemLayout:N}}),[JSON.stringify(k),N]);return u.createElement(I.Provider,{value:xe},u.createElement("div",Object(r.a)({className:se},G),("top"===ve||"both"===ve)&&de,E&&u.createElement("div",{className:"".concat(re,"-header")},E),u.createElement(h.a,Object(r.a)({},ce),he,S),D&&u.createElement("div",{className:"".concat(re,"-footer")},D),F||("bottom"===ve||"both"===ve)&&de))}N.Item=S;t.b=N},1114:function(e,t,n){"use strict";var a=n(313),r=n(190),c=(n(0),n(312)),i=n(6);t.a=Object(c.a)()((function(e){var t;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(a.a.Item,{label:e.label,name:e.name,required:null===(t=e.required)||void 0===t||t,initialValue:e.initialValue,help:e.help,children:Object(i.jsx)(r.a,{addonAfter:e.addonAfter})})})}))},1334:function(e,t,n){"use strict";var a=n(1082),r=(n(0),n(312)),c=n(6);t.a=Object(r.a)()((function(e){return Object(c.jsx)(a.a,{title:"\u60a8\u786e\u5b9a\u8981\u8fdb\u884c\u64cd\u4f5c\u5417\uff1f",onConfirm:e.onConfirm,okText:e.t("yes"),cancelText:e.t("no"),disabled:e.disabled,children:e.content})}))},1445:function(e,t,n){"use strict";n.r(t);var a=n(9),r=n(142),c=n(143),i=n(145),o=n(144),s=n(4),l=n.n(s),u=n(0),d=n(43),b=n(981),m=n(991),j=n(255),f=n(312),p=n(71),h=n(256),O=n(1023),g=n(1034),v=n(1068),x=n(1106),y=n(1114),w=n(313),S=n(205),C=n(6),I=Object(f.a)()((function(e){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(v.a,{}),Object(C.jsx)(y.a,{name:"description",label:"\u63cf\u8ff0"}),Object(C.jsx)(w.a.Item,{name:"openness",label:"\u5f00\u653e\u6027",required:!0,children:Object(C.jsxs)(S.a.Group,{children:[Object(C.jsx)(S.a,{value:0,children:"\u516c\u5f00\uff1a\u4efb\u4f55\u4eba\u53ef\u4ee5\u52a0\u5165"}),Object(C.jsx)(S.a,{value:1,children:"\u7533\u8bf7\uff1a\u9700\u8981\u7ba1\u7406\u5458\u540c\u610f"}),Object(C.jsx)(S.a,{value:2,children:"\u79c1\u6709\uff1a\u4e0d\u5141\u8bb8\u52a0\u5165"})]})}),Object(C.jsx)(x.a,{label:"\u7ec4\u516c\u544a",name:"markdown"})]})})),N=n(66),F=n(190),k=n(101),z=n(64),T=n(984),P=n(990),E=n(1334),D=F.a.TextArea,L=Object(p.b)((function(e){return{}}),(function(e){return{addTableVersion:function(t){return e({type:"addTableVersion",name:t})}}}))(Object(f.a)()(Object(d.e)((function(e){var t=Object(u.useState)(e.initData),n=Object(N.a)(t,2),a=n[0],r=n[1],c=Object(u.useState)([]),i=Object(N.a)(c,2),o=i[0],s=i[1],l=Object(u.useState)([]),d=Object(N.a)(l,2),m=d[0],f=d[1],p=Object(u.useState)(),h=Object(N.a)(p,2),O=h[0],g=h[1],v=Object(u.useState)(!1),x=Object(N.a)(v,2),y=x[0],w=x[1],S=Object(u.useRef)([]),I=Object(u.useState)(""),F=Object(N.a)(I,2),L=F[0],V=F[1],M=function(){e.addTableVersion("GroupList")},A=function(){j.a.getGroupDetail({groupId:e.groupId}).then((function(e){!function(e){r(e),f(e.filter((function(e){return 2===e.status}))),s(e.filter((function(e){return 1===e.status})))}(e.members),g(e.owner)})).catch((function(){console.log("error")}))},R=function(t,n){var c={groupId:e.groupId,userIds:t.map((function(e){return e.userId})),status:n};j.a.updateUserStatus(c).then((function(){a.map((function(e){t.forEach((function(t){e.status=e.userId===t.userId?n:e.status}))}));var e=a.filter((function(e){return 2===e.status||1===e.status}));r(e),f(a.filter((function(e){return 2===e.status}))),s(a.filter((function(e){return 1===e.status}))),M()})).catch((function(){console.log("error")}))};Object(u.useEffect)((function(){void 0!==e.groupId&&y&&A()}),[e.groupId,y]);var G=[{title:"ID",dataIndex:"userId",width:70},{title:e.t("username"),dataIndex:"username",width:"auto"},{title:e.t("nickname"),dataIndex:"nickname",width:"auto"},{title:e.t("email"),dataIndex:"email",width:"auto"}],K=[].concat(G,[{title:e.t("operator"),width:"150px",render:function(e,t){return Object(C.jsxs)(b.b,{children:[Object(C.jsx)(E.a,{onConfirm:function(){return R([t],2)},content:Object(C.jsx)(z.a,{type:"link",size:"small",children:"\u540c\u610f"})}),Object(C.jsx)(E.a,{onConfirm:function(){return R([t],3)},content:Object(C.jsx)(z.a,{type:"link",size:"small",children:"\u62d2\u7edd"})})]})}}]),B=[].concat(G,[{title:e.t("operator"),width:"150px",render:function(t,n){return Object(C.jsx)(b.b,{children:O&&n.userId!==O.userId&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(E.a,{onConfirm:function(){return function(t){var n={groupId:e.groupId,userId:t.userId},a=k.b.loading({content:"\u52a0\u8f7d\u4e2d",duration:0});j.a.updateGroup(n).then((function(){a&&a(),g(t),M()})).catch((function(){console.log("error")}))}(n)},content:Object(C.jsx)(z.a,{type:"link",size:"small",children:"\u8f6c\u8ba9"})}),Object(C.jsx)(E.a,{onConfirm:function(){return R([n],3)},content:Object(C.jsx)(z.a,{type:"link",size:"small",children:"\u79fb\u9664"})})]})})}}]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(z.a,{type:e.btnType,size:"small",onClick:function(){w(!0)},children:e.btnName}),Object(C.jsx)(T.a,{visible:y,destroyOnClose:!0,title:e.title,width:1200,onCancel:function(){w(!1)},footer:!1,children:Object(C.jsxs)(b.b,{wrap:!0,children:[Object(C.jsxs)("div",{children:["\u7533\u8bf7\u7528\u6237(",void 0!==o?o.length:0,")"]}),Object(C.jsx)(E.a,{onConfirm:function(){return R(o,2)},content:Object(C.jsx)(z.a,{type:"primary",size:"small",children:"Accept All"}),disabled:0===o.length}),Object(C.jsx)(E.a,{onConfirm:function(){return R(o,3)},content:Object(C.jsx)(z.a,{type:"primary",danger:!0,size:"small",children:"Reject All"}),disabled:0===o.length}),Object(C.jsx)(P.a,{size:"small",columns:K,dataSource:o,pagination:!1,scroll:{y:200}}),Object(C.jsxs)("div",{children:["\u7528\u6237\u5217\u8868(",m.length,")"]}),Object(C.jsx)(D,{onChange:function(e){S.current=e.currentTarget.value.split(/,|\uff0c|\n| |\t/),V(e.currentTarget.value)},value:L,cols:180,rows:4,placeholder:"\u5c06\u7528\u6237\u540d\u7528\u7a7a\u683c' ',TAB'\\t',\u6362\u884c'\\n'\u6216\u9017\u53f7','\u5206\u9694"}),Object(C.jsx)(z.a,{type:"primary",size:"small",onClick:function(){var t={groupId:e.groupId,usernames:S.current};j.a.addUsersToGroup(t).then((function(){A(),M(),k.b.success("Success!"),V(""),S.current=[]})).catch((function(){console.log("error in add user")}))},children:"\u6dfb\u52a0\u7528\u6237"}),Object(C.jsx)(P.a,{size:"small",columns:B,dataSource:m,pagination:!1,scroll:{y:240}})]})})]})})))),V=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e=[{title:"ID",dataIndex:"groupId",width:50,responsive:["lg","sm","xs"]},{title:this.props.t("title"),dataIndex:"title",width:"auto",responsive:["lg","sm","xs"]},{title:"\u63cf\u8ff0",dataIndex:"description",width:"auto",responsive:["lg","sm"]},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"gmtCreate",width:"170px",responsive:["lg"],render:function(e){return Object(h.e)(e)}},{title:"\u7ec4\u957f",width:"auto",responsive:["lg"],render:function(e,t){return t.owner.username+"("+t.owner.nickname+")"}},{title:"\u5f00\u653e\u6027",dataIndex:"openness",width:"auto",responsive:["lg"],render:function(e){return["\u516c\u5f00","\u7533\u8bf7","\u79c1\u6709"][e]}},{title:"\u6210\u5458\u6570\u91cf",width:"auto",dataIndex:"memberNum",responsive:["lg"]},{title:this.props.t("operator"),width:"150px",render:function(e,t){return Object(C.jsxs)(b.b,{children:[Object(C.jsx)(g.a,{TableName:"GroupList",width:1200,title:t.title,type:"update",subForm:[{component:Object(C.jsx)(I,{})}],dataLoader:Object(a.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.getGroupDetail({groupId:t.groupId}));case 1:case"end":return e.stop()}}),e)}))),updateAppendProps:{groupId:t.groupId},dataSubmitter:function(e){return j.a.updateGroup(e)}}),Object(C.jsx)(L,{btnName:"\u6210\u5458\u7ba1\u7406",btnType:"link",width:1200,title:"Members in "+t.title+"(Group ID:"+t.groupId+")",initData:t,groupId:t.groupId})]})}}];return Object(C.jsx)("div",{style:{marginTop:-20,overflow:"hidden"},children:Object(C.jsx)(m.a,{size:"small",bordered:!0,title:"\u7528\u6237\u7ec4\u5217\u8868",extra:Object(C.jsx)(b.b,{children:Object(C.jsx)(g.a,{TableName:"GroupList",width:1200,title:"\u65b0\u5efa\u7528\u6237\u7ec4",type:"create",subForm:[{component:Object(C.jsx)(I,{}),label:""}],dataSubmitter:function(e){return j.a.createGroup(e)}})}),children:Object(C.jsx)(O.a,{name:"GroupList",columns:e,disableSelection:!0,API:j.a.getGroupList,size:"small",rowKey:"groupId"})})})}}]),n}(u.Component);t.default=Object(p.b)((function(e){var t;return{roles:null===(t=e.UserReducer.userInfo)||void 0===t?void 0:t.roles}}),(function(){return{}}))(Object(f.a)()(Object(d.e)(V)))}}]);
//# sourceMappingURL=43.d5397b34.chunk.js.map