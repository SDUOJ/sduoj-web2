(this.webpackJsonpsduoj=this.webpackJsonpsduoj||[]).push([[48],{1202:function(e,t,n){"use strict";var r=n(31),a=n(1006),s=n(307),i=(n(0),n(421)),c=n(6);t.a=Object(i.a)()((function(e){var t={name:"password",label:e.t("password")};return!0===e.newpass&&(t={name:"newPassword",label:e.t("NewPassword")}),!0===e.oldpass&&(t={name:"password",label:e.t("OldPassword")}),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(a.a.Item,Object(r.a)(Object(r.a)({},t),{},{rules:[{required:!0,message:e.t("passwordEmpty")}],hasFeedback:!0,children:Object(c.jsx)(s.a.Password,{})})),void 0===e.oldpass&&!0!==e.noConfirm&&Object(c.jsx)(a.a.Item,{name:"confirm",label:e.t("confirm"+(e.newpass?"New":"")+"Password"),dependencies:[t.name],hasFeedback:!0,rules:[{required:!0,message:e.t("passwordEmptyConfirm")},function(n){var r=n.getFieldValue;return{validator:function(n,a){return a&&r(t.name)!==a?Promise.reject(e.t("passwordDifferent")):Promise.resolve()}}}],children:Object(c.jsx)(s.a.Password,{})})]})}))},1208:function(e,t,n){"use strict";var r=n(88),a=n(981),s=n(982),i=n(307),c=n(1205),o=n(62),u=n(1006),l=n(0),d=n(421),j=n(127),b=n(1371),f=n(6);t.a=Object(d.a)()((function(e){var t=Object(l.useState)(),n=Object(r.a)(t,2),d=n[0],h=n[1],O=function(){j.a.getCaptcha().then((function(t){h(t.captcha),e.setImgId(t.captchaId)}))};Object(l.useEffect)((function(){O()}),[]);var m=Object(f.jsxs)(a.a,{children:[Object(f.jsx)(s.a,{span:14,children:Object(f.jsx)(i.a,{onChange:function(t){void 0!==e.setCaptcha&&e.setCaptcha(t.target.value)}})}),Object(f.jsx)(s.a,{offset:1,span:8,children:Object(f.jsx)(c.a,{src:d,height:32})}),Object(f.jsx)(s.a,{span:1,children:Object(f.jsx)(o.a,{icon:Object(f.jsx)(b.a,{}),onClick:function(){O()}})})]});return Object(f.jsx)(f.Fragment,{children:[""].map((function(){return void 0!==e.setCaptcha?m:Object(f.jsx)(u.a.Item,{name:"captcha",label:e.t("captcha"),rules:[{required:!0}],children:m})}))})}))},1209:function(e,t,n){"use strict";var r=n(1006),a=n(307),s=(n(0),n(421)),i=n(127),c=n(6);t.a=Object(s.a)()((function(e){return Object(c.jsx)(r.a.Item,{name:"username",label:e.t("username"),rules:[{required:!1!==e.editable&&!0!==e.notRequired,message:e.t("usernameEmpty")},function(t){t.getFieldValue;return{validator:function(t,n){return!0===e.ExistCheck?i.a.isExist({username:n}).then((function(e){return!1===e?Promise.resolve():!0===e?Promise.reject("\u7528\u6237\u540d\u5df2\u5b58\u5728"):Promise.reject("\u68c0\u9a8c\u5931\u8d25")})).catch((function(e){return Promise.reject(e)})):Promise.resolve()}}}],hasFeedback:!0,children:Object(c.jsx)(a.a,{disabled:!1===e.editable,bordered:e.editable})})}))},1239:function(e,t,n){"use strict";var r=n(88),a=n(1006),s=n(307),i=n(978),c=n(120),o=n(62),u=n(0),l=n(421),d=n(127),j=n(1208),b=n(6);t.a=Object(l.a)()((function(e){var t=Object(u.useState)(0),n=Object(r.a)(t,2),l=n[0],f=n[1],h=Object(u.useState)(!1),O=Object(r.a)(h,2),m=O[0],p=O[1],x=Object(u.useState)(""),v=Object(r.a)(x,2),g=v[0],y=v[1],k=Object(u.useState)(""),P=Object(r.a)(k,2),w=P[0],C=P[1],I=Object(u.useState)(""),F=Object(r.a)(I,2),E=F[0],S=F[1];return Object(u.useEffect)((function(){var e=setInterval((function(){l>0&&f(l-1)}),1e3);return function(){return clearInterval(e)}})),Object(b.jsxs)(b.Fragment,{children:[!1===e.needVerify&&Object(b.jsx)(a.a.Item,{name:"email",label:e.t("email"),rules:!0!==e.notCheck?[{type:"email",message:e.t("emailError")},{required:!1!==e.editable}]:void 0,hasFeedback:!0,children:Object(b.jsx)(s.a,{disabled:!1===e.editable,bordered:!1!==e.editable})}),!0===e.needVerify&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(i.a,{title:"\u4eba\u673a\u8eab\u4efd\u8ba4\u8bc1",visible:m,maskClosable:!1,destroyOnClose:!0,onOk:function(){d.a.sendVerificationEmail({email:E,captcha:w,captchaId:g}).then((function(e){c.b.success("\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001\u81f3\u60a8\u7684\u90ae\u7bb1"),f(60),p(!1)}))},onCancel:function(){p(!1)},children:Object(b.jsx)(j.a,{setImgId:y,setCaptcha:C})}),Object(b.jsx)(a.a.Item,{name:"email",label:e.t("new email"),rules:[{type:"email",message:e.t("emailError")},{required:!0},function(e){e.getFieldValue;return{validator:function(e,t){return d.a.isExist({email:t}).then((function(e){return!1===e?Promise.resolve():!0===e?Promise.reject("\u90ae\u7bb1\u5df2\u5b58\u5728"):Promise.reject("\u68c0\u9a8c\u5931\u8d25")})).catch((function(e){return Promise.reject(e)}))}}}],children:Object(b.jsx)(s.a,{disabled:!1===e.editable||l>0,bordered:!1!==e.editable,addonAfter:Object(b.jsx)(o.a,{type:"text",disabled:0!==l,onClick:function(){e.getEmail().then((function(e){S(e),p(!0)})).catch((function(){c.b.error("\u90ae\u7bb1\u4e0d\u5408\u6cd5")}))},children:0!==l?l+"s":e.t("Verify")})})}),Object(b.jsx)(a.a.Item,{name:"emailCode",label:e.t("emailCode"),rules:[{required:!0}],children:Object(b.jsx)(s.a,{})})]})]})}))},1242:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(139);function a(e){var t={},n=e.indexOf("?"),a=e.substr(n+1);if(-1!==n){var s,i=a.split("&"),c=Object(r.a)(i);try{for(c.s();!(s=c.n()).done;){var o=s.value.split("=");t[o[0]]=o[1]}}catch(u){c.e(u)}finally{c.f()}}return t}},1325:function(e,t,n){"use strict";t.a=n.p+"static/media/sdu-logo.9fcfaf04.jpg"},1420:function(e,t,n){"use strict";n.r(t);var r=n(137),a=n(138),s=n(141),i=n(140),c=n(0),o=n(120),u=n(250),l=n(1205),d=n(984),j=n(974),b=n(62),f=n(76),h=n(421),O=n(41),m=n(1242),p=n(127),x=n(1325),v=n(1110),g=n(9),y=n(88),k=n(4),P=n.n(k),w=n(1390),C=n(1209),I=n(1202),F=n(1239),E=n(1376),S=n(99),q=n(6),A=Object(O.e)((function(e){var t=Object(E.a)(),n=Object(y.a)(t,1)[0];return Object(c.useEffect)((function(){void 0!==e.token&&n.setFieldsValue({username:e.username})}),[e,n]),Object(q.jsxs)(w.a,{title:void 0!==e.token?"\u6ce8\u518c\u5e76\u7ed1\u5b9a":"\u7528\u6237\u6ce8\u518c",trigger:e.button,autoFocusFirstInput:!0,modalProps:{maskClosable:!1,destroyOnClose:!0,width:500,okText:"\u63d0\u4ea4"},form:n,onFinish:function(){var t=Object(g.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e.token){t.next=5;break}return Object.assign(n,{token:e.token}),t.abrupt("return",p.a.thirdPartyRegister(n).then((function(t){return p.a.login(n).then((function(){e.history.push(S.g+"/home")})),o.b.success("\u6ce8\u518c\u6210\u529f"),!0})));case 5:return t.abrupt("return",p.a.register(n).then((function(t){return p.a.login(n).then((function(){e.history.push(S.g+"/home")})),o.b.success("\u6ce8\u518c\u6210\u529f"),!0})));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[Object(q.jsx)(C.a,{ExistCheck:!0,editable:void 0===e.token}),Object(q.jsx)(I.a,{}),Object(q.jsx)(F.a,{needVerify:!0,getEmail:function(){return n.validateFields(["email"]).then((function(e){return Promise.resolve(e.email)})).catch((function(){return Promise.reject()}))}})]})})),V=Object(h.a)()(Object(O.e)((function(e){var t=Object(E.a)(),n=Object(y.a)(t,1)[0];return Object(q.jsxs)(w.a,{title:"\u7ed1\u5b9a\u5df2\u6709\u8d26\u53f7",trigger:e.button,autoFocusFirstInput:!0,modalProps:{maskClosable:!1,destroyOnClose:!0,width:500,okText:"\u63d0\u4ea4"},form:n,onFinish:function(){var t=Object(g.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object.assign(n,{token:e.token}),t.abrupt("return",p.a.thirdPartyBinding(n).then((function(t){return e.history.push(S.g+"/home"),o.b.success("\u7ed1\u5b9a\u6210\u529f"),!0})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[Object(q.jsx)(C.a,{}),Object(q.jsx)(I.a,{noConfirm:!0})]})}))),N=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(e,a){var s;return Object(r.a)(this,n),(s=t.call(this,e,a)).state={loading:!0,thirdParty:"",info:"",token:"",sduId:""},s}return Object(a.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=Object(m.a)(this.props.location.search);p.a.thirdPartyLogin({thirdParty:t.thirdParty,ticket:t.ticket}).then((function(t){if(o.b.success(e.props.t("certificationSuccess")),null===t.user){var n={loading:!1,thirdParty:t.thirdParty,token:t.token};"SDUCAS"===t.thirdParty&&Object.assign(n,{info:t.sduRealName+" ("+t.sduId+")",sduId:t.sduId}),e.setState(n)}else e.props.history.push(S.g+"/home")}))}},{key:"render",value:function(){var e=this;return Object(q.jsx)("div",{className:"center",style:{width:450},children:[""].map((function(){return!0===e.state.loading?Object(q.jsx)(u.a,{tip:e.props.t("certificationIn..."),children:Object(q.jsx)("div",{style:{textAlign:"center",margin:"0 auto"},children:Object(q.jsx)("div",{children:Object(q.jsx)(l.a,{width:200,src:x.a,preview:!1})})})}):Object(q.jsx)(q.Fragment,{children:Object(q.jsx)(d.a,{title:Object(q.jsxs)("span",{children:[e.props.t("firstTimeUse"),Object(q.jsx)("span",{style:{fontWeight:"bold"},children:e.state.thirdParty}),e.props.t("login,BindingOperationRequired")]}),children:Object(q.jsxs)(j.b,{direction:"vertical",size:15,children:[Object(q.jsxs)("div",{style:{textAlign:"left"},children:[e.props.t("certificationInformation:"),Object(q.jsx)("span",{style:{fontWeight:"bold"},children:e.state.info})]}),Object(q.jsxs)("div",{style:{textAlign:"left"},children:[e.props.t("statuteOfLimitationsCurrentCertification"),Object(q.jsx)("span",{style:{fontWeight:"bold"},children:e.props.t("5Minutes")}),e.props.t("validWithin")]}),Object(q.jsx)(A,{token:e.state.token,username:e.state.sduId,button:Object(q.jsx)(b.a,{block:!0,type:"primary",children:e.props.t("registerAsANewUserAndBind")})}),Object(q.jsx)(V,{token:e.state.token,button:Object(q.jsx)(b.a,{block:!0,type:"primary",children:e.props.t("bindExistingAccounts")})})]})})})}))})}}]),n}(c.Component);t.default=Object(f.b)((function(e){return{}}),(function(e){return{testLogin:function(){return e(Object(v.a)())}}}))(Object(h.a)()(Object(O.e)(N)))}}]);
//# sourceMappingURL=48.f0794c0d.chunk.js.map