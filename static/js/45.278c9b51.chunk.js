(this.webpackJsonpsduoj=this.webpackJsonpsduoj||[]).push([[45],{1018:function(e,t,n){"use strict";var a=n(31),r=n(88),s=n(984),o=n(1006),i=n(974),c=n(62),l=n(1125),u=n(983),d=n(0),b=n(99),m=n(76),j=n(421),f=n(41),p=n(309),O=n(66),h=n(1376),v=n(6);t.a=Object(m.b)((function(e){var t,n=e.UserReducer,r=e.TableReduce;return{roles:null===(t=n.userInfo)||void 0===t?void 0:t.roles,tableData:Object(a.a)({},r.tableData)}}),(function(e){return{setTableInfo:function(t,n){return e({type:"setTableInfo",name:t,data:n})},setDataSource:function(t,n){return e({type:"setDataSource",data:t,name:n,add:!1})}}}))(Object(j.a)()(Object(f.e)((function(e){var t,n=Object(d.useState)(0),m=Object(r.a)(n,2),j=m[0],f=m[1],y=Object(d.useState)(),S=Object(r.a)(y,2),g=S[0],x=S[1],w=Object(d.useState)(!0),I=Object(r.a)(w,2),C=I[0],T=I[1],k=Object(d.useState)(1),R=Object(r.a)(k,2),N=R[0],z=R[1],D=Object(d.useState)(Object(O.a)(e.defaultPageSize,b.h)),A=Object(r.a)(D,2),P=A[0],M=A[1],F=Object(d.useState)(),_=Object(r.a)(F,2),E=_[0],K=_[1],V=Object(d.useState)(0),L=Object(r.a)(V,2),B=L[0],H=L[1],W=function(t){x(t),void 0!==e.setDataSource&&void 0!==e.name&&e.setDataSource(t,e.name)},J=function(t,n,r,s){var o,i,c,l,u,d,b,m,j,p=null===(o=e.tableData[e.name])||void 0===o?void 0:o.tableInfo;void 0!==p&&(void 0===s&&void 0!==p.moreProps&&Q.setFieldsValue(p.moreProps),t=null!==(d=t)&&void 0!==d?d:p.pageNow,n=null!==(b=n)&&void 0!==b?b:p.pageSize,r=null!==(m=r)&&void 0!==m?m:p.searchKey,s=null!==(j=s)&&void 0!==j?j:p.moreProps);var O=null!==(i=t)&&void 0!==i?i:N,h=null!==(c=n)&&void 0!==c?c:P,v=null!==(l=r)&&void 0!==l?l:E,y=null!==(u=s)&&void 0!==u?u:Q.getFieldsValue();z(O),M(h),K(v),T(!0),e.API(Object(a.a)({pageNow:O,pageSize:h,searchKey:v},y)).then((function(t){null===t.rows&&(t.rows=[]),void 0!==e.APIRowsTransForm?W(e.APIRowsTransForm(t.rows)):W(t.rows),void 0!==t.totalNum&&"0"!==t.totalNum?(f(t.totalNum),e.name&&e.setTableInfo(e.name,{total:t.totalNum,pageNow:O,pageSize:h,searchKey:v,moreProps:y})):(f(h*t.totalPage),e.name&&e.setTableInfo(e.name,{total:h*t.totalPage,pageNow:O,pageSize:h,searchKey:v,moreProps:y})),T(!1)}))};Object(d.useEffect)((function(){Q.setFieldsValue(e.initRequestProps),J()}),[e.name]);var U=Object(h.a)(),Q=Object(r.a)(U,1)[0],$=function(){var e=Q.getFieldsValue();"{}"!==JSON.stringify(e)&&J(1,P,void 0,e)},q=function(){var t,n=Q.getFieldsValue();Q.resetFields();var a=null===(t=e.tableData[e.name])||void 0===t?void 0:t.tableInfo;e.name&&e.setTableInfo(e.name,{total:a.total,pageNow:a.pageNow,pageSize:a.pageSize,searchKey:a.searchKey,moreProps:void 0});var r=Q.getFieldsValue();JSON.stringify(n)!==JSON.stringify(r)&&J(1,P,void 0,void 0)};return Object(d.useEffect)((function(){var t,n=null===(t=e.tableData[e.name])||void 0===t?void 0:t.tableVersion;if(void 0!==n&&B!==n)if(n<0){var a;H(-n),x(null===(a=e.tableData[e.name])||void 0===a?void 0:a.dataSource)}else{H(n);var r=Q.getFieldsValue();J(N,P,E,r)}}),[e.tableData,B]),Object(v.jsxs)(v.Fragment,{children:[e.useList&&Object(v.jsx)(s.a,{title:e.title,bordered:!0,size:"default",className:null!==(t=e.cardProps)&&void 0!==t?t:"zeroBodyPaddingLeft",extra:(!0===e.search||void 0!==e.getForm)&&Object(v.jsxs)(v.Fragment,{children:[!0===e.search&&Object(v.jsx)(p.a,{placeholder:e.t("searchUser"),onSearch:function(e){K(e),z(1);var t=Q.getFieldsValue();J(1,P,e,t)},enterButton:!0,style:{width:300}},"search"),void 0!==e.getForm&&Object(v.jsxs)(o.a,{form:Q,children:[e.getForm($),e.useFormBtn&&Object(v.jsxs)(i.b,{style:{marginLeft:"30px"},size:20,children:[Object(v.jsx)(c.a,{type:"primary",onClick:$,children:"\u7b5b\u9009"}),Object(v.jsx)(c.a,{htmlType:"button",onClick:q,children:"\u91cd\u7f6e"})]})]})]}),children:Object(v.jsx)(l.b,{grid:e.grid,itemLayout:"vertical",loading:C,size:e.size,dataSource:g,renderItem:e.renderItem,pagination:{onChange:function(e,t){J(e,t)},current:N,pageSize:P,total:j,size:"small",hideOnSinglePage:!0,showQuickJumper:!0,showLessItems:!0,showSizeChanger:Object(O.a)(e.showSizeChanger,!0),pageSizeOptions:["5","15","20","50","80"]}})}),!e.useList&&Object(v.jsx)(s.a,{bordered:!1,size:"small",extra:(!0===e.search||void 0!==e.getForm)&&Object(v.jsxs)(v.Fragment,{children:[!0===e.search&&Object(v.jsx)(p.a,{placeholder:"\u641c\u7d22",onSearch:function(e){K(e),z(1),J(1,P,e)},enterButton:!0,style:{width:300}},"search"),void 0!==e.getForm&&Object(v.jsxs)(o.a,{form:Q,children:[e.getForm($),Object(v.jsxs)(i.b,{style:{marginLeft:"30px"},size:20,children:[Object(v.jsx)(c.a,{type:"primary",onClick:$,children:e.t("filtering")}),Object(v.jsx)(c.a,{htmlType:"button",onClick:q,children:e.t("Reset")})]})]})]}),children:Object(v.jsx)(u.a,{rowKey:e.rowKey,loading:C,size:e.size,columns:e.columns,rowSelection:e.rowSelection,dataSource:g,pagination:{onChange:function(e,t){J(e,t)},current:N,pageSize:P,total:j,hideOnSinglePage:!0,showQuickJumper:!0,showLessItems:!0,showSizeChanger:Object(O.a)(e.showSizeChanger,!0),pageSizeOptions:["5","15","20","50","80"]}})})]})}))))},1039:function(e,t,n){"use strict";var a=n(1060),r=n(31),s=n(88),o=n(983),i=n(0),c=n.n(i),l=n(76),u=n(421),d=n(41),b=n(1067),m=n(1447),j=n(1066),f=n(6),p=["className","style"];t.a=c.a.memo(Object(l.b)((function(e){var t=e.TableReduce;return{tableData:Object(r.a)({},t.tableData)}}),(function(e){return{setTableInfo:function(t,n){return e({type:"setTableInfo",name:t,data:n})},setDataSource:function(t,n){return e({type:"setDataSource",data:t,name:n,add:!1})}}}))(Object(u.a)()(Object(d.e)((function(e){var t=Object(i.useState)([]),n=Object(s.a)(t,2),c=n[0],l=n[1],u=Object(i.useState)(!0),d=Object(s.a)(u,2),O=d[0],h=d[1],v=Object(i.useState)(0),y=Object(s.a)(v,2),S=y[0],g=y[1],x=function(t){l(t),void 0!==e.setDataSource&&void 0!==e.name&&e.setDataSource(t,e.name)},w=function(){h(!0),e.API().then((function(t){null===t&&(t=[]),void 0!==e.APIRowsTransForm?x(e.APIRowsTransForm(t)):x(t),h(!1)}))};Object(i.useEffect)((function(){w()}),[e.name]),Object(i.useEffect)((function(){var t,n,a=null===(t=e.tableData[e.name])||void 0===t?void 0:t.tableVersion;void 0!==a&&S!==a&&(a<0?(g(-a),l(null===(n=e.tableData[e.name])||void 0===n?void 0:n.dataSource)):(g(a),w()))}),[e.tableData,S]);var I=Object(b.c)((function(){return Object(f.jsx)(m.a,{style:{cursor:"grab",color:"#999"}})})),C=Object(b.b)((function(e){return Object(f.jsx)("tr",Object(r.a)({},e))})),T=Object(b.a)((function(e){return Object(f.jsx)("tbody",Object(r.a)({},e))})),k=function(t){var n=t.oldIndex,a=t.newIndex;n!==a&&(x(Object(j.a)(c,n,a)),e.afterDrag&&e.afterDrag(c,n,a))},R=[{title:"",dataIndex:"sort",width:50,className:"drag-visable",render:function(){return Object(f.jsx)(I,{})}}],N=e.columns;return e.useDrag&&(N=R.concat(N)),Object(f.jsx)(o.a,Object(r.a)(Object(r.a)({},e),{},{rowSelection:e.rowSelection,rowKey:e.rowKey,loading:O,size:e.size,columns:N,dataSource:c,pagination:!1,components:{body:{wrapper:function(e){return Object(f.jsx)(T,Object(r.a)({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:k},e))},row:function(t){t.className,t.style;var n=Object(a.a)(t,p),s=c.findIndex((function(t){return t[e.rowKey]===n["data-row-key"]}));return Object(f.jsx)(C,Object(r.a)({index:s},n))}}}}))})))),(function(e,t){var n,a;return e.columns===t.columns&&(null===(n=e.rowSelection)||void 0===n?void 0:n.selectedRowKeys.length)===(null===(a=t.rowSelection)||void 0===a?void 0:a.selectedRowKeys.length)&&e.tableData===t.tableData&&e.updateTrick===t.updateTrick}))},1040:function(e,t,n){"use strict";var a=n(31),r=n(139),s=n(88),o=n(421),i=n(62),c=n(974),l=n(1006),u=n(307),d=n(174),b=n(984),m=n(120),j=n(315),f=n(127),p=n(973),O=n(36),h=n(103),v=n(0),y=n(128),S=n.n(y),g=n(1041),x=n(196),w=n(76),I=n(41),C=n(66),T=n(194),k=n(6);t.a=Object(w.b)((function(e){var t,n=e.TableReduce,a=e.UserReducer;return{tableData:n.tableData,roles:null===(t=a.userInfo)||void 0===t?void 0:t.roles}}),(function(e){return{addTableVersion:function(t){return e({type:"addTableVersion",name:t})},setSelectedRowKeys:function(t,n){return e({type:"setSelectedRowKeys",data:t,name:n})},setDataSource:function(t,n){return e({type:"setDataSource",data:t,name:n,add:!0})},setTopSubmission:function(t,n){return e({type:"setTopSubmission",submissionID:t,submissionInfo:n})},setSubmissionModalVis:function(t){return e({type:"setSubmissionModalVis",data:t})}}}))(Object(o.a)()(Object(I.e)((function(e){var t,n,o=Object(v.useState)(!1),y=Object(s.a)(o,2),w=y[0],I=y[1],R=Object(v.useState)([]),N=Object(s.a)(R,2),z=N[0],D=N[1],A=Object(v.useState)(!1),P=Object(s.a)(A,2),M=P[0],F=P[1],_=Object(C.a)(null===(t=e.tableData[e.name])||void 0===t?void 0:t.selectedRowKeys,[]),E=Object(C.a)(null===(n=e.tableData[e.name])||void 0===n?void 0:n.dataSource,[]),K=function(t){e.setTopSubmission(t.submissionId,{title:t.problemTitle,TimeLimit:t.timeLimit,MemoryLimit:t.memoryLimit,scoreMod:void 0===t.sumScore?"disable":"show",sumScore:t.sumScore,testcaseMod:"show",QuerySubmissionAPI:e.QuerySubmissionAPI}),e.setSubmissionModalVis(!0)},V=[{title:e.t("results"),dataIndex:"result",key:"result",render:function(e,t){return Object(k.jsx)("div",{onClick:function(){K(t)},children:Object(k.jsx)(h.a,{type:"text",caseType:O.b.indexOf(O.c[e]),append:"-2"===e?"("+t.RunningStep+"/"+(t.checkpointNum+t.publicCheckpointNum)+")":""})})}},{title:e.t("score"),dataIndex:"score",key:"score",render:function(e,t){return void 0===t.sumScore?e:Math.floor(e/t.sumScore*100)+"%"}},{title:e.t("submissionTime"),dataIndex:"submitTime",key:"submitTime",render:function(e){return S()(e).fromNow()}}],L=[{title:"ID",dataIndex:"submissionId",key:"submissionId",render:function(e,t){return Object(k.jsx)(i.a,{type:"link",size:"small",onClick:function(){K(t)},children:e})}},{title:e.t("username"),dataIndex:"username",key:"username"},{title:e.t("problemNo."),dataIndex:"problemCode",key:"problemCode",render:e.problemCodeRender},{title:e.t("problemName"),dataIndex:"problemTitle",key:"problemTitle"},{title:e.t("results"),dataIndex:"result",key:"result",width:170,render:function(e,t){return Object(k.jsx)(h.a,{type:"text",caseType:O.b.indexOf(O.c[e]),append:"-2"===e?"("+t.RunningStep+"/"+(t.checkpointNum+t.publicCheckpointNum)+")":""})}},{title:e.t("score"),dataIndex:"score",key:"score",render:function(e,t){return void 0===t.sumScore?e:Math.floor(e/t.sumScore*100)+"%"}},{title:e.t("template"),dataIndex:"judgeTemplateTitle",key:"judgeTemplateTitle"},{title:e.t("memoryUsage"),dataIndex:"usedMemory",key:"usedMemory",render:function(e){return e+" KB"}},{title:e.t("timeUsage"),dataIndex:"usedTime",key:"usedTime",render:function(e){return e+" ms"}},{title:e.t("submissionTime"),dataIndex:"submitTime",key:"submitTime",render:function(e){return S()(e).fromNow()}}];return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(b.a,{title:Object(k.jsxs)(c.b,{children:[void 0!==e.title?e.title:e.t("submissionRecord"),Object(k.jsx)(j.a,{open:w,dataHandle:function(t){var n=t[0],a=(t[1],t[2]),s=t[3],o=(t[4],t[5]),i=t[6],c=t[7],l=t[8],u=E,d=u.findIndex((function(e){return e.submissionId===n}));if(-1!==d){if(s<0){u[d].result=s.toString(),-1===s&&(u[d].result=o,u[d].score=i,u[d].usedTime=c,u[d].usedMemory=l);var b,m=0,j=Object(r.a)(u);try{for(j.s();!(b=j.n()).done;){var f=b.value;parseInt(f.result)<=0&&(m+=1)}}catch(O){j.e(O)}finally{j.f()}0===m&&I(!1)}else{var p=0;0===a?p=s+1:1===a&&(p=u[d].checkpointNum+s+1),u[d].RunningStep<p&&(u[d].RunningStep=p,u[d].score+=i)}e.setDataSource(u,e.name)}},queryList:z})]}),style:e.lessInfo?{}:{minWidth:1200},className:e.lessInfo?"smallBodyPadding":"",extra:Object(k.jsxs)(c.b,{children:[!0!==e.lessInfo&&Object(T.a)(e.roles,["admin","superadmin"])&&Object(k.jsx)(x.a,{API:f.a.rejudge,data:_,afterSuccess:function(){e.addTableVersion(e.name),e.setSelectedRowKeys([],e.name)}}),Object(k.jsx)(i.a,{icon:Object(k.jsx)(p.a,{}),onClick:function(){F(!0),e.addTableVersion(e.name),m.b.success(e.t("refreshSuccessfully")),setTimeout((function(){F(!1)}),3e3)},disabled:M,children:e.t("refresh")})]}),children:Object(k.jsx)(g.a,{disableSelection:e.lessInfo||!Object(T.a)(e.roles,["admin","superadmin"]),defaultPageSize:e.lessInfo?5:void 0,showSizeChanger:!e.lessInfo&&void 0,columns:e.lessInfo?V:L,getForm:!0===e.useForm?function(t){return Object(k.jsxs)(c.b,{size:30,children:[Object(k.jsx)(l.a.Item,{label:e.t("username"),name:"username",children:Object(k.jsx)(u.a,{onPressEnter:function(e){t()},allowClear:!0})}),Object(k.jsx)(l.a.Item,{label:e.t("problemNo."),name:"problemCode",children:Object(k.jsx)(u.a,{onPressEnter:function(e){t()},allowClear:!0})}),Object(k.jsx)(l.a.Item,{label:e.t("JudgeResult"),name:"judgeResult",children:Object(k.jsx)(d.a,{onChange:t,allowClear:!0,style:{width:200},children:O.a.map((function(e){return Object(k.jsx)(d.a.Option,{value:parseInt(e),children:Object(k.jsx)(h.a,{type:"text",caseType:O.b.indexOf(O.c[e])})})}))})})]})}:void 0,name:e.name,size:"small",rowKey:"submissionId",API:function(t){if("problemCode"in t&&!Object(C.c)(t.problemCode)){var n=t.problemCode;1===n.length?(null!==n.match(/^[a-z]$/)&&(n=(n.charCodeAt(0)-"a".charCodeAt(0)+1).toString()),null!==n.match(/^[A-Z]$/)&&(n=(n.charCodeAt(0)-"A".charCodeAt(0)+1).toString())):null!==n.match(/^[0-9]{4}$/)&&(n="SDUOJ-"+n),t.problemCode=n}return e.API(t)},APIRowsTransForm:function(e){Object(C.c)(e)&&(e=[]);var t,n=[],s=[],o=Object(r.a)(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;i.judgeResult<=0&&n.push(i.submissionId),s.push(Object(a.a)(Object(a.a)({},i),{},{score:i.judgeScore,RunningStep:0,result:i.judgeResult.toString(),sumScore:i.sumScore,submitTime:parseInt(i.gmtCreate)}))}}catch(c){o.e(c)}finally{o.f()}return 0!==n.length&&(I(!0),D(n)),s}})})})}))))},1041:function(e,t,n){"use strict";var a=n(31),r=n(137),s=n(138),o=n(141),i=n(140),c=n(0),l=n(421),u=n(41),d=n(76),b=n(1018),m=n(66),j=n(1039),f=n(6),p=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).setSelectedRowKeys=function(t){e.props.setSelectedRowKeys(t,e.props.name)},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e,t=this,n=Object(m.a)(null===(e=this.props.tableData[this.props.name])||void 0===e?void 0:e.selectedRowKeys,[]),r={selectedRowKeys:n,onChange:function(e){t.setSelectedRowKeys(e)},selections:[{key:"all",text:this.props.t("selectedAll"),onSelect:function(e){var a=e;a=a.concat(n.filter((function(t){return!e.includes(t)}))),t.setSelectedRowKeys(a)}},{key:"clear",text:this.props.t("clear"),onSelect:function(e){var a=n.filter((function(t){return!e.includes(t)}));t.setSelectedRowKeys(a)}},{key:"invert",text:this.props.t("invert"),onSelect:function(e){var a=e.filter((function(e){return!n.includes(e)}));a=a.concat(n.filter((function(t){return!e.includes(t)}))),t.setSelectedRowKeys(a)}}]};return Object(f.jsxs)(f.Fragment,{children:[this.props.uesAlldata&&Object(f.jsx)(j.a,Object(a.a)(Object(a.a)({},this.props),{},{rowSelection:this.props.disableSelection?void 0:r})),!0!==this.props.uesAlldata&&Object(f.jsx)(b.a,Object(a.a)(Object(a.a)({},this.props),{},{rowSelection:this.props.disableSelection?void 0:r}))]})}}]),n}(c.Component);t.a=Object(d.b)((function(e){return{tableData:e.TableReduce.tableData}}),(function(e){return{setSelectedRowKeys:function(t,n){return e({type:"setSelectedRowKeys",data:t,name:n})}}}))(Object(l.a)()(Object(u.e)(p)))},1124:function(e,t,n){"use strict";var a=n(3),r=n(18),s=n(0),o=n(310),i=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},c=function(e,t){var n=e.ellipsis,r=e.rel,c=i(e,["ellipsis","rel"]),l=s.useRef(null);s.useImperativeHandle(t,(function(){return l.current}));var u=Object(a.a)(Object(a.a)({},c),{rel:void 0===r&&"_blank"===c.target?"noopener noreferrer":r});return delete u.navigate,s.createElement(o.a,Object(a.a)({},u,{ref:l,ellipsis:!!n,component:"a"}))},l=s.forwardRef(c),u=function(e,t){return s.createElement(o.a,Object(a.a)({ref:t},e,{component:"div"}))},d=s.forwardRef(u),b=n(30),m=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},j=function(e,t){var n=e.ellipsis,i=m(e,["ellipsis"]),c=s.useMemo((function(){return n&&"object"===Object(r.a)(n)?Object(b.a)(n,["expandable","rows"]):n}),[n]);return s.createElement(o.a,Object(a.a)({ref:t},i,{ellipsis:c,component:"span"}))},f=s.forwardRef(j),p=n(80),O=n(323).a;O.Text=f,O.Link=l,O.Title=p.a,O.Paragraph=d;t.a=O},1329:function(e,t,n){},1371:function(e,t,n){"use strict";var a=n(1),r=n(0),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M824.2 699.9a301.55 301.55 0 00-86.4-60.4C783.1 602.8 812 546.8 812 484c0-110.8-92.4-201.7-203.2-200-109.1 1.7-197 90.6-197 200 0 62.8 29 118.8 74.2 155.5a300.95 300.95 0 00-86.4 60.4C345 754.6 314 826.8 312 903.8a8 8 0 008 8.2h56c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5A226.62 226.62 0 01612 684c60.9 0 118.2 23.7 161.3 66.8C814.5 792 838 846.3 840 904.3c.1 4.3 3.7 7.7 8 7.7h56a8 8 0 008-8.2c-2-77-33-149.2-87.8-203.9zM612 612c-34.2 0-66.4-13.3-90.5-37.5a126.86 126.86 0 01-37.5-91.8c.3-32.8 13.4-64.5 36.3-88 24-24.6 56.1-38.3 90.4-38.7 33.9-.3 66.8 12.9 91 36.6 24.8 24.3 38.4 56.8 38.4 91.4 0 34.2-13.3 66.3-37.5 90.5A127.3 127.3 0 01612 612zM361.5 510.4c-.9-8.7-1.4-17.5-1.4-26.4 0-15.9 1.5-31.4 4.3-46.5.7-3.6-1.2-7.3-4.5-8.8-13.6-6.1-26.1-14.5-36.9-25.1a127.54 127.54 0 01-38.7-95.4c.9-32.1 13.8-62.6 36.3-85.6 24.7-25.3 57.9-39.1 93.2-38.7 31.9.3 62.7 12.6 86 34.4 7.9 7.4 14.7 15.6 20.4 24.4 2 3.1 5.9 4.4 9.3 3.2 17.6-6.1 36.2-10.4 55.3-12.4 5.6-.6 8.8-6.6 6.3-11.6-32.5-64.3-98.9-108.7-175.7-109.9-110.9-1.7-203.3 89.2-203.3 199.9 0 62.8 28.9 118.8 74.2 155.5-31.8 14.7-61.1 35-86.5 60.4-54.8 54.7-85.8 126.9-87.8 204a8 8 0 008 8.2h56.1c4.3 0 7.9-3.4 8-7.7 1.9-58 25.4-112.3 66.7-153.5 29.4-29.4 65.4-49.8 104.7-59.7 3.9-1 6.5-4.7 6-8.7z"}}]},name:"team",theme:"outlined"},o=n(14),i=function(e,t){return r.createElement(o.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:s}))};i.displayName="TeamOutlined";t.a=r.forwardRef(i)},1416:function(e,t,n){"use strict";n.r(t);var a,r,s=n(9),o=n(139),i=n(31),c=n(88),l=n(4),u=n.n(l),d=n(421),b=n(41),m=n(981),j=n(982),f=n(978),p=n(983),O=n(974),h=n(1124),v=n(0),y=n(76),S=n(127),g=(n(1329),n(253)),x=["title","titleId"];function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function I(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function C(e,t){var n=e.title,s=e.titleId,o=I(e,x);return v.createElement("svg",w({t:1646560118011,className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg","p-id":1998,width:200,height:200,ref:t,"aria-labelledby":s},o),n?v.createElement("title",{id:s},n):null,a||(a=v.createElement("path",{d:"M877.3632 253.5424h-78.6944V200.192c0-22.0672-17.8688-39.936-39.936-39.936h-482.304c-22.0672 0-39.936 17.8688-39.936 39.936v53.3504H152.1664c-22.0672 0-39.936 17.8688-39.936 39.936v84.0704c0 65.6384 53.248 118.8864 118.8864 118.8864h5.4784c1.9968 142.0288 109.2608 258.56 247.3472 275.0464v89.7536H367.0016a30.8224 30.8224 0 1 0 0 61.6448h295.5264a30.8224 30.8224 0 1 0 0-61.6448h-116.9408v-89.088c140.8-13.9264 251.0336-131.7376 253.0304-275.7632 65.5872-0.1024 118.6816-53.2992 118.6816-118.8864V293.4272c0-22.016-17.8688-39.8848-39.936-39.8848z m-175.1552 213.3504a30.8224 30.8224 0 1 1-61.6448 0v-150.528a30.8224 30.8224 0 1 1 61.6448 0v150.528z",fill:"#FCDFAE","p-id":1999})),r||(r=v.createElement("path",{d:"M877.3632 211.7632h-78.6944V158.4128c0-22.0672-17.8688-39.936-39.936-39.936h-482.304c-22.0672 0-39.936 17.8688-39.936 39.936v53.3504H152.1664c-22.0672 0-39.936 17.8688-39.936 39.936v84.0704c0 65.6384 53.248 118.8864 118.8864 118.8864h5.4784c1.9968 142.0288 109.2608 258.56 247.3472 275.0464v89.7536H367.0016a30.8224 30.8224 0 1 0 0 61.6448h295.5264a30.8224 30.8224 0 1 0 0-61.6448h-116.9408v-89.088c140.8-13.9264 251.0336-131.7376 253.0304-275.7632 65.5872-0.1024 118.6816-53.2992 118.6816-118.8864V251.648c0-22.016-17.8688-39.8848-39.936-39.8848z m-175.1552 213.3504a30.8224 30.8224 0 1 1-61.6448 0v-150.528a30.8224 30.8224 0 1 1 61.6448 0v150.528z",fill:"#F8B62D","p-id":2e3})))}var T=v.forwardRef(C),k=(n.p,n(1)),R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},N=n(14),z=function(e,t){return v.createElement(N.a,Object(k.a)(Object(k.a)({},e),{},{ref:t,icon:R}))};z.displayName="FileTextOutlined";var D=v.forwardRef(z),A=n(1371),P=n(992),M=n(1040),F=n(6);t.default=Object(y.b)((function(e){var t=e.ContestReducer;return{ContestInfo:t.contestInfo,minWidth:t.minWidth,afterContestSubmission:t.afterContestSubmission,allowSliderMove:t.allowSliderMove,sliderTime:t.sliderTime,openSliderMove:t.openSliderMove}}),(function(e){return{setMinWidth:function(t){return e({type:"setMinWidth",data:t})},setAllowSliderMove:function(t){return e({type:"setAllowSliderMove",data:t})},setExportData:function(t){return e({type:"setExportData",data:t})}}}))(Object(d.a)()(Object(b.e)((function(e){var t=e.match.params.contestId,n=e.ContestInfo[t],a=Object(v.useState)(),r=Object(c.a)(a,2),l=r[0],d=r[1],b=Object(v.useState)(),y=Object(c.a)(b,2),x=y[0],w=y[1],I=void 0!==n?Object(g.b)(n.gmtStart,n.gmtEnd):void 0,C=Object(v.useState)({}),k=Object(c.a)(C,2),R=k[0],N=k[1],z=Object(v.useState)(Date.now()),_=Object(c.a)(z,2),E=_[0],K=_[1],V=Object(v.useState)(!1),L=Object(c.a)(V,2),B=L[0],H=L[1],W=Object(v.useState)(""),J=Object(c.a)(W,2),U=J[0],Q=J[1],$=Object(v.useState)(""),q=Object(c.a)($,2),Z=q[0],G=q[1];Object(v.useEffect)((function(){void 0===l&&S.a.getRank({contestId:t}).then((function(t){t.length>0&&null!==t[0].submission&&e.setAllowSliderMove(!0),t.map((function(e,t){null!==e.submissions&&e.submissions.sort((function(e,t){return parseInt(e[1])-parseInt(t[1])}))})),d(t)}))}),[l,d,t,I]),Object(v.useEffect)((function(){if(void 0!==l){if(e.openSliderMove&&Math.abs(Date.now()-E)<=500)return;e.openSliderMove&&K(Date.now());var t=n.problems,a={};a.SumNumber=l.length;for(var r=0;r<t.length;r++)a["submit_".concat(r)]=t[r].submitNum,a["ac_".concat(r)]=t[r].acceptNum,a["user_submit_".concat(r)]=0,a["user_ac_".concat(r)]=0,a["first_ac_".concat(r)]=parseInt(n.gmtEnd)+1;var s=l.map((function(r,s){var o=0,i=0,c=0,l={},u=r.official,d=function(e,r){var s="",d=void 0,b=void 0,m="";0!==e.length&&0!==parseInt(e[0])&&(d=e[1],o+=e[1]*t[r].problemWeight,s="orange",1===e[2]&&(s="green"),0===e[1]&&(s="red"),a["user_submit_".concat(r)]+=1,1===e[2]?(a["user_ac_".concat(r)]+=1,!0===u&&(a["first_ac_".concat(r)]=Math.min(a["first_ac_".concat(r)],parseInt(e[0]))),m="accepted",c+=20*e[3],b=parseInt(e[0]),c+=Object(g.c)(n.gmtStart,b)/60,i+=1):m="rejected"),l["".concat(r+1)]={color:s,score:d,minTime:b,tries:e[3]+(1===e[2]),className:m}};if(null===r.submissions)r.problemResults.map((function(e,t){return d(e,t)}));else{for(var b=Math.max(e.sliderTime,parseInt(n.gmtStart)),m={},j=0;j<r.submissions.length;j++){var f=r.submissions[j];if(!e.afterContestSubmission&&parseInt(f[1])>parseInt(n.gmtEnd))break;if(e.openSliderMove&&parseInt(f[1])>b)break;var p=f[0];void 0===m[p]&&(m[p]={time:0,score:-1,result:0,submission:0,submissionBeforeAC:0});var O=m[p];(O.score<f[2]||O.score===f[2]&&(O.time>parseInt(f[1])||1!==O.result&&1===f[3]))&&(O.time=parseInt(f[1]),O.score=f[2],O.result=f[3]),1!==O.result&&(O.submissionBeforeAC+=1),O.submission+=1}for(var h in m)d([m[h].time.toString(),m[h].score,m[h].result,m[h].submissionBeforeAC,0],parseInt(h)-1)}return{username:r.username,nickname:r.nickname,official:r.official,rank:s+1,sumScore:o,Cell:l,ACNumber:i,penalty:c}}));s.sort((function(e,t){return"acm"===n.features.mode?e.ACNumber===t.ACNumber?e.penalty-t.penalty:t.ACNumber-e.ACNumber:"ioi"===n.features.mode?t.sumScore-e.sumScore:void 0}));var o=1,c=0,u=s.map((function(e,t){return!1===e.official?Object(i.a)(Object(i.a)({},e),{},{rank:"*"}):(c+=1,0===t?Object(i.a)(Object(i.a)({},e),{},{rank:1}):(a=s[t-1],r=e,("acm"===n.features.mode?a.ACNumber===r.ACNumber&&Math.abs(a.penalty-r.penalty)<1e-6:"ioi"===n.features.mode?a.sumScore===r.sumScore:void 0)||(o=c),Object(i.a)(Object(i.a)({},e),{},{rank:o})));var a,r}));N(a),w(u),e.setExportData(u)}}),[l,e.afterContestSubmission,e.sliderTime]);var X=[{title:"\u6392\u540d",dataIndex:"rank",width:80,render:function(e){return Object(F.jsxs)("span",{className:"center",children:[" ",e," "]})}},{title:"\u53c2\u8d5b\u4eba",width:150,render:function(e,t){return Object(F.jsxs)("div",{style:{paddingLeft:10,paddingRight:10},children:[Object(F.jsx)("span",{style:{float:"left",marginTop:10}}),Object(F.jsxs)("span",{style:{float:"right",textAlign:"right"},children:[Object(F.jsx)("div",{style:{fontWeight:"bold"},children:t.username}),Object(F.jsx)("div",{style:{color:"grey",fontSize:12},children:t.nickname})]})]})}},{title:"\u5206\u6570",width:100,render:function(e,t){return Object(F.jsxs)(F.Fragment,{children:["ioi"===n.features.mode&&Object(F.jsx)("span",{children:t.sumScore}),"acm"===n.features.mode&&Object(F.jsxs)(m.a,{children:[Object(F.jsx)(j.a,{span:12,children:Object(F.jsx)("span",{style:{fontWeight:"bold"},children:t.ACNumber})}),Object(F.jsx)(j.a,{span:11,children:Object(F.jsx)("span",{children:Math.floor(t.penalty)})})]})]})}}],Y=330;if(void 0!==n){var ee,te=Object(o.a)(n.problems);try{var ne=function(){var e=ee.value;X.push({title:Object(F.jsxs)("div",{className:"ProHeader",children:[Object(F.jsx)("div",{children:Object(F.jsx)("span",{style:{fontWeight:"bold"},children:String.fromCharCode("A".charCodeAt(0)+parseInt(e.problemCode)-1)})}),Object(F.jsxs)("div",{style:{color:"grey",fontSize:12},children:[e.acceptNum," / ",e.submitNum]})]}),width:70,render:function(t,a){var r=a.Cell[e.problemCode];return void 0===r?Object(F.jsx)(F.Fragment,{}):Object(F.jsxs)("div",{onClick:function(){Q(a.username),G(e.problemCode),H(!0)},children:["ioi"===n.features.mode&&Object(F.jsx)("span",{style:{fontWeight:"bold",color:r.color},children:r.score}),"acm"===n.features.mode&&Object(F.jsxs)("div",{className:Math.abs(r.minTime-R["first_ac_".concat(e.problemCode-1)])<1e-6?"firstAccept":r.className,children:[void 0!==r.minTime&&Object(F.jsx)("div",{style:{fontSize:16},children:Math.floor(Object(g.c)(n.gmtStart,r.minTime)/60)}),void 0===r.minTime&&Object(F.jsx)("div",{style:{fontSize:16},children:"\xa0\xa0"}),Object(F.jsxs)("div",{children:[r.tries," ",1===r.tries?"try":"tries"]})]})]})}}),Y+=70};for(te.s();!(ee=te.n()).done;)ne()}catch(ae){te.e(ae)}finally{te.f()}e.minWidth!==Y&&e.setMinWidth(Y)}return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(f.a,{width:1250,visible:B,footer:!1,destroyOnClose:!0,onCancel:function(){H(!1)},children:Object(F.jsx)(M.a,{btnText:"\u8bb0\u5f55-"+U+"-"+Z,name:"Contest-Rank-SubmissionList-"+U+"-"+Z,API:function(){var e=Object(s.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S.a.getContestSubmissionList(Object(i.a)(Object(i.a)({},n),{},{problemCode:Z,username:U,contestId:t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),QuerySubmissionAPI:function(){var e=Object(s.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S.a.getContestSubmissionInfo({contestId:t,submissionId:n}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),Object(F.jsx)(p.a,{className:"RankTable",style:{width:Y,minWidth:Y},pagination:!1,bordered:!0,dataSource:x,rowClassName:function(e,t){return"rowBase"},columns:X,summary:function(){return Object(F.jsx)(p.a.Summary,{children:Object(F.jsxs)(p.a.Summary.Row,{className:"RankSummary",children:[Object(F.jsx)(p.a.Summary.Cell,{index:0,colSpan:2,children:Object(F.jsxs)(O.b,{size:50,children:["\u603b\u7ed3",Object(F.jsxs)("div",{style:{textAlign:"left",fontSize:12},children:[Object(F.jsxs)("div",{children:[Object(F.jsx)(D,{})," \u901a\u8fc7\u6570/\u63d0\u4ea4\u6570"]}),Object(F.jsxs)("div",{children:[Object(F.jsx)(A.a,{})," \u901a\u8fc7\u7528\u6237/\u63d0\u4ea4\u7528\u6237"]}),Object(F.jsxs)("div",{children:[Object(F.jsx)(P.a,{component:T})," \u6700\u65e9\u901a\u8fc7"]})]})]})}),0!==Object.keys(R).length&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)(p.a.Summary.Cell,{index:1,children:[" ",Object(F.jsx)(A.a,{})," ",R.SumNumber]}),n.problems.map((function(e){var t=parseInt(e.problemCode)-1;return Object(F.jsxs)(p.a.Summary.Cell,{index:2+t,className:"RankSummary-Pro",children:[Object(F.jsxs)("div",{children:[Object(F.jsx)(D,{})," ",R["ac_".concat(t)],"/",R["submit_".concat(t)]]}),Object(F.jsxs)("div",{children:[Object(F.jsx)(A.a,{})," ",R["user_ac_".concat(t)],"/",R["user_submit_".concat(t)]]}),Object(F.jsx)("div",{children:parseInt(n.gmtEnd)+1!==R["first_ac_".concat(t)]&&Object(F.jsxs)("div",{children:[Object(F.jsx)(P.a,{component:T}),Object(F.jsx)(h.a.Text,{ellipsis:{tooltip:Object(g.a)(n.gmtStart,R["first_ac_".concat(t)],"d","h","m","s")},style:{width:50},children:Object(g.a)(n.gmtStart,R["first_ac_".concat(t)],"d","h","m","s")})]})})]})}))]})]})})}})]})}))))}}]);
//# sourceMappingURL=45.278c9b51.chunk.js.map