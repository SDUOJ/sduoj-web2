(this.webpackJsonpsduoj=this.webpackJsonpsduoj||[]).push([[38],{1199:function(e,t,n){"use strict";var a=n(65),r=n(988),c=n(989),s=n(190),i=n(1209),o=n(63),l=n(313),u=n(0),j=n(312),d=n(104),b=n(1386),f=n(6);t.a=Object(j.a)()((function(e){var t=Object(u.useState)(),n=Object(a.a)(t,2),j=n[0],h=n[1],p=function(){d.a.getCaptcha().then((function(t){h(t.captcha),e.setImgId(t.captchaId)}))};Object(u.useEffect)((function(){p()}),[]);var O=Object(f.jsxs)(r.a,{children:[Object(f.jsx)(c.a,{span:14,children:Object(f.jsx)(s.a,{onChange:function(t){void 0!==e.setCaptcha&&e.setCaptcha(t.target.value)}})}),Object(f.jsx)(c.a,{offset:1,span:8,children:Object(f.jsx)(i.a,{src:j,height:32})}),Object(f.jsx)(c.a,{span:1,children:Object(f.jsx)(o.a,{icon:Object(f.jsx)(b.a,{}),onClick:function(){p()}})})]});return Object(f.jsx)(f.Fragment,{children:[""].map((function(){return void 0!==e.setCaptcha?O:Object(f.jsx)(l.a.Item,{name:"captcha",label:e.t("captcha"),rules:[{required:!0}],children:O})}))})}))},1200:function(e,t,n){"use strict";var a=n(313),r=n(190),c=(n(0),n(312)),s=n(104),i=n(6);t.a=Object(c.a)()((function(e){return Object(i.jsx)(a.a.Item,{name:"username",label:e.t("username"),rules:[{required:!1!==e.editable&&!0!==e.notRequired,message:e.t("usernameEmpty")},function(t){t.getFieldValue;return{validator:function(t,n){return!0===e.ExistCheck?s.a.isExist({username:n}).then((function(e){return!1===e?Promise.resolve():!0===e?Promise.reject("\u7528\u6237\u540d\u5df2\u5b58\u5728"):Promise.reject("\u68c0\u9a8c\u5931\u8d25")})).catch((function(e){return Promise.reject(e)})):Promise.resolve()}}}],hasFeedback:!0,children:Object(i.jsx)(r.a,{disabled:!1===e.editable,bordered:e.editable})})}))},1201:function(e,t,n){"use strict";var a=n(65),r=n(313),c=n(190),s=n(984),i=n(101),o=n(63),l=n(0),u=n(312),j=n(104),d=n(1199),b=n(6);t.a=Object(u.a)()((function(e){var t,n=Object(l.useState)(0),u=Object(a.a)(n,2),f=u[0],h=u[1],p=Object(l.useState)(!1),O=Object(a.a)(p,2),m=O[0],v=O[1],x=Object(l.useState)(""),g=Object(a.a)(x,2),y=g[0],P=g[1],I=Object(l.useState)(""),C=Object(a.a)(I,2),w=C[0],k=C[1],E=Object(l.useState)(""),V=Object(a.a)(E,2),F=V[0],A=V[1];return Object(l.useEffect)((function(){var e=setInterval((function(){f>0&&h(f-1)}),1e3);return function(){return clearInterval(e)}})),Object(b.jsxs)(b.Fragment,{children:[!1===e.needVerify&&Object(b.jsx)(r.a.Item,{name:"email",label:e.t("email"),rules:!0!==e.notCheck?[{type:"email",message:e.t("emailError")},{required:!1!==e.editable}]:void 0,hasFeedback:!0,children:Object(b.jsx)(c.a,{disabled:!1===e.editable,bordered:!1!==e.editable})}),!0===e.needVerify&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(s.a,{title:"\u4eba\u673a\u8eab\u4efd\u8ba4\u8bc1",visible:m,maskClosable:!1,destroyOnClose:!0,onOk:function(){j.a.sendVerificationEmail({email:F,captcha:w,captchaId:y,event:e.emailVerifyType}).then((function(e){i.b.success("\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001\u81f3\u60a8\u7684\u90ae\u7bb1"),h(60),v(!1)}))},onCancel:function(){v(!1)},children:Object(b.jsx)(d.a,{setImgId:P,setCaptcha:k})}),Object(b.jsx)(r.a.Item,{name:"email",label:null!==(t=e.emailTitle)&&void 0!==t?t:e.t("new email"),rules:[{required:!0},function(t){t.getFieldValue;return{validator:function(t,n){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)?!1===e.checkExist?Promise.resolve():j.a.isExist({email:n}).then((function(t){return!1===t?Promise.resolve():!0===t?Promise.reject(e.t("\u90ae\u7bb1\u5df2\u5b58\u5728")):Promise.reject(e.t("\u68c0\u9a8c\u5931\u8d25"))})).catch((function(e){return Promise.reject(e)})):Promise.reject(e.t("emailError"))}}}],children:Object(b.jsx)(c.a,{disabled:!1===e.editable||f>0,bordered:!1!==e.editable,onPressEnter:e.onPressEnter,addonAfter:Object(b.jsx)(o.a,{type:"text",disabled:0!==f,onClick:function(){e.getEmail().then((function(e){A(e),v(!0)})).catch((function(){i.b.error("\u90ae\u7bb1\u4e0d\u5408\u6cd5")}))},children:0!==f?f+"s":e.t("Verify")})})}),Object(b.jsx)(r.a.Item,{name:"emailCode",label:e.t("emailCode"),rules:[{required:!0}],children:Object(b.jsx)(c.a,{onPressEnter:e.onPressEnter})})]})]})}))},1281:function(e,t,n){"use strict";var a=n(27),r=n(65),c=n(312),s=n(63),i=n(101),o=n(984),l=n(992),u=n(190),j=n(0),d=(n(1282),n(6));t.a=Object(c.a)()((function(e){var t=Object(j.useState)(!1),n=Object(r.a)(t,2),c=n[0],b=n[1],f=Object(j.useState)(""),h=Object(r.a)(f,2),p=h[0],O=h[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(s.a,Object(a.a)(Object(a.a)({},e.btnProps),{},{onClick:function(){void 0!==e.beforeCheck?e.beforeCheck().then((function(){b(!0)})).catch((function(){i.b.error("\u8868\u5355\u4e0d\u5b8c\u6574")})):b(!0)},children:e.btnText})),Object(d.jsxs)(o.a,{title:"\u64cd\u4f5c\u786e\u8ba4",visible:c,className:"Reconfirm-Modal",onCancel:function(){b(!1)},footer:[Object(d.jsxs)(s.a,{block:!0,danger:!0,disabled:e.confirm!==p,onClick:function(){void 0!==e.API&&e.API(),O(""),b(!1)},children:[" \u6211\u786e\u5b9a\u8981",e.todo," "]})],children:[Object(d.jsx)(l.a,{message:Object(d.jsxs)("span",{style:{fontWeight:"bold"},children:["\u60a8\u786e\u5b9a\u8981",e.todo,"\u5417\uff1f"]}),type:"warning",showIcon:!0,style:{marginBottom:10}}),Object(d.jsxs)("div",{className:"Reconfirm-Modal-Input",children:["\u8bf7\u8f93\u5165 ",Object(d.jsx)("span",{style:{fontWeight:"bold"},children:e.confirm})," \u8fdb\u884c\u786e\u8ba4\u3002",Object(d.jsx)(u.a,{value:p,onChange:function(e){O(e.target.value)}})]})]})]})}))},1282:function(e,t,n){},1305:function(e,t,n){"use strict";var a,r;n.d(t,"a",(function(){return a})),function(e){e[e.Unknown=2]="Unknown",e[e.Male=1]="Male",e[e.Female=0]="Female"}(a||(a={})),function(e){e[e.boy=0]="boy",e[e.girl=1]="girl"}(r||(r={}))},1323:function(e,t,n){"use strict";var a=n(313),r=n(190),c=(n(0),n(312)),s=n(6);t.a=Object(c.a)()((function(e){return Object(s.jsx)(a.a.Item,{name:"nickname",label:e.t("nickname"),initialValue:e.value,children:Object(s.jsx)(r.a,{})})}))},1324:function(e,t,n){"use strict";var a=n(313),r=n(190),c=(n(0),n(312)),s=n(6);t.a=Object(c.a)()((function(e){return Object(s.jsx)(a.a.Item,{name:"studentId",label:e.t("student_id"),initialValue:e.value,children:Object(s.jsx)(r.a,{})})}))},1325:function(e,t,n){"use strict";var a=n(313),r=n(205),c=(n(0),n(312)),s=n(1305),i=n(1428),o=n(1429),l=n(1388),u=n(6);t.a=Object(c.a)()((function(e){var t=[{label:Object(u.jsx)(i.a,{style:{color:"rgb(30,112,185)"}}),value:s.a.Male},{label:Object(u.jsx)(o.a,{style:{color:"rgb(230,0,126)"}}),value:s.a.Female},{label:Object(u.jsx)(l.a,{}),value:s.a.Unknown}];return Object(u.jsx)(a.a.Item,{name:"gender",label:e.t("sex"),children:Object(u.jsx)(r.a.Group,{options:t,optionType:"button"})})}))},1326:function(e,t,n){"use strict";var a=n(313),r=n(190),c=(n(0),n(312)),s=n(6);t.a=Object(c.a)()((function(e){return Object(s.jsx)(a.a.Item,{name:"phone",label:e.t("phone"),initialValue:e.value,rules:[{required:e.required}],children:Object(s.jsx)(r.a,{})})}))},1327:function(e,t,n){"use strict";var a=n(313),r=n(177),c=(n(0),n(312)),s=n(6);t.a=Object(c.a)()((function(e){return Object(s.jsx)(a.a.Item,{name:"roles",label:e.t("roles"),rules:[{required:e.editable,message:"Please select roles!"}],initialValue:e.value,children:Object(s.jsxs)(r.a,{mode:"multiple",allowClear:!0,disabled:!1===e.editable,bordered:e.editable,children:[Object(s.jsx)(r.a.Option,{value:"user",children:e.t("user")}),Object(s.jsx)(r.a.Option,{value:"admin",children:e.t("admin")}),Object(s.jsx)(r.a.Option,{value:"superadmin",children:e.t("superadmin")})]})})}))},1386:function(e,t,n){"use strict";var a=n(1),r=n(0),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},s=n(14),i=function(e,t){return r.createElement(s.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:c}))};i.displayName="RedoOutlined";t.a=r.forwardRef(i)},1388:function(e,t,n){"use strict";var a=n(1),r=n(0),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M764 280.9c-14-30.6-33.9-58.1-59.3-81.6C653.1 151.4 584.6 125 512 125s-141.1 26.4-192.7 74.2c-25.4 23.6-45.3 51-59.3 81.7-14.6 32-22 65.9-22 100.9v27c0 6.2 5 11.2 11.2 11.2h54c6.2 0 11.2-5 11.2-11.2v-27c0-99.5 88.6-180.4 197.6-180.4s197.6 80.9 197.6 180.4c0 40.8-14.5 79.2-42 111.2-27.2 31.7-65.6 54.4-108.1 64-24.3 5.5-46.2 19.2-61.7 38.8a110.85 110.85 0 00-23.9 68.6v31.4c0 6.2 5 11.2 11.2 11.2h54c6.2 0 11.2-5 11.2-11.2v-31.4c0-15.7 10.9-29.5 26-32.9 58.4-13.2 111.4-44.7 149.3-88.7 19.1-22.3 34-47.1 44.3-74 10.7-27.9 16.1-57.2 16.1-87 0-35-7.4-69-22-100.9zM512 787c-30.9 0-56 25.1-56 56s25.1 56 56 56 56-25.1 56-56-25.1-56-56-56z"}}]},name:"question",theme:"outlined"},s=n(14),i=function(e,t){return r.createElement(s.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:c}))};i.displayName="QuestionOutlined";t.a=r.forwardRef(i)},1422:function(e,t,n){"use strict";n.r(t);var a=n(9),r=n(142),c=n(143),s=n(145),i=n(144),o=n(4),l=n.n(o),u=n(0),j=n.n(u),d=n(43),b=n(988),f=n(989),h=n(991),p=n(313),O=n(1126),m=n(101),v=n(1231),x=n(1201),g=n(1200),y=n(70),P=n(312),I=n(1323),C=n(1324),w=n(1325),k=n(1326),E=n(1327),V=n(104),F=n(406),A=n(272),S=n(1281),U=n(71),M=n(254),T=n(6),R=function(e){return!0===e.loading?Object(T.jsx)("div",{className:"page-center",children:Object(T.jsx)(M.a,{size:"large"})}):e.content},q=n(91),z=function(e){Object(s.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).ref1=j.a.createRef(),e.ref2=j.a.createRef(),e.ref3=j.a.createRef(),e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.isLogin||(console.log("not login"),this.props.history.replace(q.g+"/login?to="+this.props.location.pathname))}},{key:"componentDidUpdate",value:function(e,t,n){this.props.isLogin||this.props.history.replace(q.g+"/login?to="+this.props.location.pathname)}},{key:"render",value:function(){var e,t=this;return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(R,{loading:void 0===this.props.userInfo,content:Object(T.jsx)("div",{style:{textAlign:"center",margin:"0 auto"},children:Object(T.jsx)("div",{style:{textAlign:"left",maxWidth:"1500px",margin:"0 auto"},children:Object(T.jsxs)(b.a,{style:{marginTop:0},children:[Object(T.jsxs)(f.a,{span:16,children:[Object(T.jsx)(h.a,{title:this.props.t("Profile"),children:Object(T.jsx)(p.a,{initialValues:this.props.userInfo,ref:this.ref1,children:Object(T.jsxs)(b.a,{children:[Object(T.jsxs)(f.a,{span:11,children:[Object(T.jsx)(g.a,{editable:!1}),Object(T.jsx)(I.a,{}),Object(T.jsx)(C.a,{}),Object(T.jsx)(F.a,{API:Object(a.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(n=t.ref1.current)||void 0===n?void 0:n.validateFields().then((function(e){return V.a.updateProfile(e).then((function(e){return V.a.getProfile().then((function(e){t.props.setUserInfo(e)})),Promise.resolve(t.props.t("success"))}))})).catch((function(e){return Promise.reject(e)})));case 1:case"end":return e.stop()}}),e)}))),btnProps:{type:"default"},btnText:this.props.t("update")})]}),Object(T.jsxs)(f.a,{span:11,offset:1,children:[Object(T.jsx)(w.a,{}),Object(T.jsx)(k.a,{}),Object(T.jsx)(x.a,{needVerify:!1,editable:!1}),Object(T.jsx)(E.a,{editable:!1})]})]})})}),Object(T.jsx)(h.a,{style:{marginTop:30},title:this.props.t("ChangePass"),children:Object(T.jsx)(p.a,{ref:this.ref2,layout:"vertical",children:Object(T.jsxs)(b.a,{children:[Object(T.jsxs)(f.a,{span:11,children:[Object(T.jsx)(A.a,{oldpass:!0}),Object(T.jsx)(F.a,{API:Object(a.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(n=t.ref2.current)||void 0===n?void 0:n.validateFields().then((function(e){return V.a.updatePassword(e).then((function(e){var n;return null===(n=t.ref2.current)||void 0===n||n.resetFields(),Promise.resolve(t.props.t("success"))}))})).catch((function(e){return Promise.reject(e)})));case 1:case"end":return e.stop()}}),e)}))),btnProps:{type:"default"},btnText:this.props.t("update")})]}),Object(T.jsx)(f.a,{offset:1,span:11,children:Object(T.jsx)(A.a,{newpass:!0})})]})})}),Object(T.jsx)(h.a,{style:{marginTop:30},title:this.props.t("modifyEmail"),children:Object(T.jsx)(p.a,{ref:this.ref3,layout:"vertical",children:Object(T.jsxs)(b.a,{children:[Object(T.jsxs)(f.a,{span:11,children:[Object(T.jsx)(A.a,{noConfirm:!0}),Object(T.jsx)(F.a,{API:Object(a.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(n=t.ref3.current)||void 0===n?void 0:n.validateFields().then((function(e){return V.a.updateEmail(e).then((function(e){var n;return null===(n=t.ref3.current)||void 0===n||n.resetFields(),Promise.resolve(t.props.t("success"))}))})).catch((function(e){return Promise.reject(e)})));case 1:case"end":return e.stop()}}),e)}))),btnProps:{type:"default"},btnText:this.props.t("update")})]}),Object(T.jsx)(f.a,{offset:1,span:11,children:Object(T.jsx)(x.a,{needVerify:!0,emailVerifyType:"updateEmail",getEmail:Object(a.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(n=t.ref3.current)||void 0===n?void 0:n.validateFields(["email"]).then((function(e){return Promise.resolve(e.email)})).catch((function(){return Promise.reject()})));case 1:case"end":return e.stop()}}),e)})))})})]})})})]}),Object(T.jsxs)(f.a,{span:7,style:{marginLeft:"30px"},children:[Object(T.jsx)(h.a,{children:Object(T.jsxs)("div",{style:{textAlign:"center",margin:"0 auto"},children:[Object(T.jsxs)("div",{children:[Object(T.jsx)(v.a,{email:null===(e=this.props.userInfo)||void 0===e?void 0:e.email,size:150}),Object(T.jsx)("br",{})]}),Object(T.jsxs)("div",{style:{marginTop:25},children:[this.props.t("weUse")," ",Object(T.jsx)("a",{href:"https://cravatar.cn/",children:"Cravatar"})," ",this.props.t("toPresentYourAvatarIcon")]})]})}),[""].map((function(){var e;if(!Object(U.c)(null===(e=t.props.userInfo)||void 0===e?void 0:e.sduId))return Object(T.jsx)(h.a,{title:"SDUCAS\uff08".concat(t.props.t("sduUnifiedIdentityPlatform"),"\uff09"),style:{marginTop:30},children:Object(T.jsxs)("div",{style:{textAlign:"center",margin:"0 auto"},children:[t.props.userInfo.sduId,Object(T.jsx)(O.a,{type:"vertical"}),Object(T.jsx)(S.a,{btnProps:{size:"small",type:"link"},btnText:t.props.t("unbinding"),todo:t.props.t("unbindSdusForUnifiedAuthentication"),confirm:t.props.userInfo.sduId,API:function(){V.a.thirdPartyUnbinding({thirdParty:"SDUCAS"}).then((function(e){V.a.getProfile().then((function(e){t.props.setUserInfo(e)})),m.b.success(t.props.t("unwindingSuccessful"))}))}})]})})}))]})]})})})})})}}]),n}(u.Component);t.default=Object(y.b)((function(e){var t=e.UserReducer;return{isLogin:t.isLogin,userInfo:t.userInfo}}),(function(e){return{setUserInfo:function(t){return e({type:"setUserInfo",data:t})}}}))(Object(P.a)()(Object(d.e)(z)))},1428:function(e,t,n){"use strict";var a=n(1),r=n(0),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M874 120H622c-3.3 0-6 2.7-6 6v56c0 3.3 2.7 6 6 6h160.4L583.1 387.3c-50-38.5-111-59.3-175.1-59.3-76.9 0-149.3 30-203.6 84.4S120 539.1 120 616s30 149.3 84.4 203.6C258.7 874 331.1 904 408 904s149.3-30 203.6-84.4C666 765.3 696 692.9 696 616c0-64.1-20.8-124.9-59.2-174.9L836 241.9V402c0 3.3 2.7 6 6 6h56c3.3 0 6-2.7 6-6V150c0-16.5-13.5-30-30-30zM408 828c-116.9 0-212-95.1-212-212s95.1-212 212-212 212 95.1 212 212-95.1 212-212 212z"}}]},name:"man",theme:"outlined"},s=n(14),i=function(e,t){return r.createElement(s.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:c}))};i.displayName="ManOutlined";t.a=r.forwardRef(i)},1429:function(e,t,n){"use strict";var a=n(1),r=n(0),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M712.8 548.8c53.6-53.6 83.2-125 83.2-200.8 0-75.9-29.5-147.2-83.2-200.8C659.2 93.6 587.8 64 512 64s-147.2 29.5-200.8 83.2C257.6 200.9 228 272.1 228 348c0 63.8 20.9 124.4 59.4 173.9 7.3 9.4 15.2 18.3 23.7 26.9 8.5 8.5 17.5 16.4 26.8 23.7 39.6 30.8 86.3 50.4 136.1 57V736H360c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h114v140c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V812h114c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H550V629.5c61.5-8.2 118.2-36.1 162.8-80.7zM512 556c-55.6 0-107.7-21.6-147.1-60.9C325.6 455.8 304 403.6 304 348s21.6-107.7 60.9-147.1C404.2 161.5 456.4 140 512 140s107.7 21.6 147.1 60.9C698.4 240.2 720 292.4 720 348s-21.6 107.7-60.9 147.1C619.7 534.4 567.6 556 512 556z"}}]},name:"woman",theme:"outlined"},s=n(14),i=function(e,t){return r.createElement(s.a,Object(a.a)(Object(a.a)({},e),{},{ref:t,icon:c}))};i.displayName="WomanOutlined";t.a=r.forwardRef(i)}}]);
//# sourceMappingURL=38.0b6c5567.chunk.js.map